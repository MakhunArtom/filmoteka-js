var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired76b;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired76b=a);var i=a("7GRT7"),s=a("ccJnQ");a("7GRT7");const r=new(0,(H=a("5SzY7")).default);let o,l="",c="";async function g(e){const t=await x(e);return o=t.total_pages,t.results}function p(e,t,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function d(e,t,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}const u=document.querySelector("#pagination");function f(e){const t=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:q,peg3:q,peg4:q,peg5:q,peg6:q};(q===o||q>=o-4)&&h(a),Number(n.textContent)===q&&v(a),Number(t.textContent)===q&&m(a),(1===q||q<=5)&&y()}function _(e){const t=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:q,peg3:q,peg4:q,peg5:q,peg6:q};q>=o-5&&h(a),q>Number(n.textContent)&&v(a),q<=2&&y(),q<Number(t.textContent)&&m(a)}function h(e){if(q>o)return;let{peg2:t,peg3:n,peg4:a,peg5:i,peg6:s}=e;u.innerHTML="",s=o-1,i=o-2,a=o-3,n=o-4,t=o-5,u.innerHTML=d(t,n,a,i,s)}function m(e){if(q<=2)return;u.innerHTML="";let{peg2:t,peg3:n,peg4:a,peg5:i,peg6:s}=e;i-=1,a-=2,n-=3,t-=4,u.innerHTML=p(t,n,a,i,s)}function v(e){if(q>=o-1)return;u.innerHTML="";let{peg2:t,peg3:n,peg4:a,peg5:i,peg6:s}=e;n+=1,a+=2,i+=3,s+=4,u.innerHTML=p(t,n,a,i,s)}function y(){o<7||(u.innerHTML="",u.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n<a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>2</a>\n<a class='pagination__page' id="thirdPage" href=''>3</a>\n<a class='pagination__page' id="fourthPage" href=''>4</a>\n<a class='pagination__page' id="fifthPage" href=''>5</a>\n<a class='pagination__page' id="lastPag" href=''>6</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`)}s=a("ccJnQ");async function P(e){e.preventDefault();const t=await async function(){return(await async function(e){return await(await fetch(j+`3/search/movie?api_key=${e}&language=en-US&query=${l}&page=${q}`)).json()}(R)).results}(),n=await M(t);n.length>0&&(0,s.renderItems)(n)}function b(){const e={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};e.firstPage.textContent>2&&e.ellipsisStart.classList.remove("visually-hidden"),e.lastPage.textContent>=o-1?e.ellipsisEnd.classList.add("visually-hidden"):e.ellipsisEnd.classList.remove("visually-hidden")}function S(){const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};q>1&&e.leftBtn.removeAttribute("disabled"),q!==o?e.rightBtn.removeAttribute("disabled"):e.rightBtn.setAttribute("disabled","disabled")}function L(e){const t={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};t.activ&&t.activ.classList.remove("pagination__page--activ"),q==t.firstPage.textContent&&t.firstPage.classList.add("pagination__page--activ"),q==t.thirdPage.textContent&&t.thirdPage.classList.add("pagination__page--activ"),q==t.fourthPage.textContent&&t.fourthPage.classList.add("pagination__page--activ"),q==t.fifthPage.textContent&&t.fifthPage.classList.add("pagination__page--activ"),q==t.lastPag.textContent&&t.lastPag.classList.add("pagination__page--activ"),q==t.preFirstPage.textContent&&t.preFirstPage.classList.add("pagination__page--activ"),q==t.preLastPag.textContent&&t.preLastPag.classList.add("pagination__page--activ")}const w=new(0,(H=a("5SzY7")).default);let q=1;const T={pagination:document.querySelector("#pagination"),mainContainer:document.querySelector(".filmoteka__container")};async function x(e){return await(await fetch(j+`3/trending/movie/day?api_key=${e}&page=${q}`)).json()}async function $(e){const t=await(await fetch(j+`3/genre/movie/list?api_key=${e}&language=en-US`)).json();return i.default.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}async function C(e,t){return await(await fetch(j+`3/search/movie?api_key=${e}&language=en-US&query=${t}`)).json()}T.pagination.addEventListener("click",(function(e){if(e.preventDefault(),w.spinOn(),"A"!==e.target.nodeName)return;q=Number(e.target.textContent),T.mainContainer.innerHTML="",console.log(""===l),""===l?G():P(e);f(),b(),L(),S(),w.spinOff()})),T.pagination.addEventListener("click",(function(e){if(e.preventDefault(),w.spinOn(),"BUTTON"!==e.target.nodeName)return;const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};e.target===t.rightBtn&&(q+=1);e.target===t.leftBtn&&(q-=1);T.mainContainer.innerHTML="",""===l?G():P(e);_(),b(),L(),S(),w.spinOff()}));i=a("7GRT7");async function E(e){i.default.load("genresList")||await $(R);let t=i.default.load("genresList"),n=new Array;return e.forEach((async e=>{try{n.push(t.find((t=>t.id===e)).name)}catch(a){console.log(`${e} wasn't found in Local Storage, updating ganresList`),t=await $(R),n.push(t.find((t=>t.id===e)).name)}})),n.join(", ")}i=a("7GRT7");async function M(e){const t=await Promise.all(e.map((async({id:e,title:t,original_title:n,name:a,original_name:i,overview:s,poster_path:r,genre_ids:o,popularity:l,release_date:c,first_air_date:g,vote_average:p,vote_count:d})=>{const u=t||a,f=n||i,_=c||g,h=r?"https://image.tmdb.org/t/p/w300"+r:"",m=o.length>1&&await E(o),v=p?p.toFixed(1):0;return await{id:e,title:u,originalTitle:f,year:_?_.slice(0,4):void 0,genres:m,popularity:l,overview:s,rating:v,voteCount:d,imgPath:h}})));return i.default.save("currentPage",t),t}var O=a("34clH"),B=a("eTE0Z"),k=(s=a("ccJnQ"),a("jWOqs")),H=a("5SzY7"),F=a("z2zGY");const N=new(0,H.default),R="565e4989d784811de7dff7d665000157",j="https://api.themoviedb.org/",D={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search")};async function G(){const e=await g(R),t=await M(e);(0,s.renderItems)(t),N.spinOff(),(0,k.default)()}D.mainContainer.addEventListener("click",B.openModal),D.openModalBtn.addEventListener("click",O.openModalFooter),D.form.addEventListener("submit",(async function(e){if(e.preventDefault(),r.spinOn(),c=e.target.search.value,D.searchResultText.classList.add("visually-hidden"),!c)return G(),y(),l="",void r.spinOff();const t=await async function(){const e=await C(R,c);return o=e.total_pages,e.results}(),n=await M(t);if(t.length>0&&(l=e.target.search.value),n.length>0)return(0,s.renderItems)(n),y(),void r.spinOff();D.searchResultText.classList.remove("visually-hidden"),r.spinOff()})),(0,F.btnWhiteBlack)(),N.spinOn(),G(),setTimeout(y,500);
//# sourceMappingURL=index.3001952f.js.map

var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},a=t.parcelRequired76b;null==a&&((a=function(t){if(t in e)return e[t].exports;if(t in n){var a=n[t];delete n[t];var i={id:t,exports:{}};return e[t]=i,a.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequired76b=a);var i=a("34clH"),s=a("eTE0Z"),l=a("7GRT7");function o(t,e,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<ul class="pagination__list">\n <li class='pagination__item'>\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n </li>\n <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n  <li class='pagination__item'>\n  <a class='pagination__page' id="firstPage" href=''>${t}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='thirdPage' href=''>${e}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n </li>\n <li class='pagination__item' id="preLastItem">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n </li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n <li class='pagination__item' id="lastItem">\n  <a class='pagination__page' id="preLastPag" href=''>${D}</a>\n </li>\n</ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function r(t,e,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n</li>\n  <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>${t}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='thirdPage' href=''>${e}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${D}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}const c=document.querySelector("#pagination");function g(t){const e=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:E,peg3:E,peg4:E,peg5:E,peg6:E};Number(n.textContent)===E&&f(a),(E===D||E>=D-4)&&u(a),Number(e.textContent)===E&&d(a),(1===E||E<=5)&&_()}function p(t){const e=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:E,peg3:E,peg4:E,peg5:E,peg6:E};E>=D-5&&u(a),E>Number(n.textContent)&&f(a),E<=2&&_(),E<Number(e.textContent)&&d(a)}function u(t){if(E>D)return;let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;c.innerHTML="",s=D-1,i=D-2,a=D-3,n=D-4,e=D-5,c.innerHTML=r(e,n,a,i,s)}function d(t){if(E<=2)return;c.innerHTML="";let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;i-=1,a-=2,n-=3,e-=4,c.innerHTML=o(e,n,a,i,s)}function f(t){if(E>=D-1)return;c.innerHTML="";let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;n+=1,a+=2,i+=3,s+=4,c.innerHTML=o(e,n,a,i,s)}function _(){D<7||(c.innerHTML="",c.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n</li>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>2</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="thirdPage" href=''>3</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fourthPage" href=''>4</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fifthPage" href=''>5</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>6</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="preLastPag" href=''>${D}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`)}function m(){c.innerHTML="",c.innerHTML="<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n  <ul class=\"pagination__list\">\n  <li class='pagination__item'>\n  <a class=\"pagination__page pagination__page--activ \" id=\"preFirstPage\" href=''>1</a>\n  </li>\n  </ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>";const t=[,,'id="firstPage"',"id ='thirdPage'","id ='fourthPage'","id ='fifthPage'",'id="lastPag"','id="preLastPag"'],e=document.querySelector(".pagination__list");let n="";for(let e=2;e<D+1;e+=1)n+=`<li class='pagination__item'><a class="pagination__page"  href='' ${t[e]}>${e}</a></li>`;e.insertAdjacentHTML("beforeend",n)}l=a("7GRT7");async function h(t){l.default.load("genresList")||await A(V);let e=l.default.load("genresList"),n=new Array;return t.forEach((async t=>{try{n.push(e.find((e=>e.id===t)).name)}catch(a){console.log(`${t} wasn't found in Local Storage, updating ganresList`),e=await A(V),n.push(e.find((e=>e.id===t)).name)}})),n.join(", ")}l=a("7GRT7");async function v(t){const e=await Promise.all(t.map((async({id:t,title:e,original_title:n,name:a,original_name:i,overview:s,poster_path:l,genre_ids:o,popularity:r,release_date:c,first_air_date:g,vote_average:p,vote_count:u})=>{const d=e||a,f=n||i,_=c||g,m=l?"https://image.tmdb.org/t/p/w300"+l:"",v=o.length>1&&await h(o),y=p?p.toFixed(1):0;return await{id:t,title:d,originalTitle:f,year:_?_.slice(0,4):void 0,genres:v,popularity:r,overview:s,rating:y,voteCount:u,imgPath:m}})));return l.default.save("currentPage",e),e}var y=a("ccJnQ"),b=a("jWOqs");const P=new(0,($=a("5SzY7")).default);async function L(t){t.preventDefault();const e=await async function(){return(await async function(t){return await(await fetch(Z+`3/search/movie?api_key=${t}&language=en-US&query=${W}&page=${E}`)).json()}(V)).results}(),n=await v(e);if(n.length>0)return(0,y.renderItems)(n),P.spinOff(),void(0,b.default)()}async function S(){const t=await J(V),e=await v(t);(0,y.renderItems)(e),P.spinOff(),(0,b.default)()}var w=a("6WRUV");function q(){const t={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};t.firstPage.textContent>2&&t.ellipsisStart.classList.remove("visually-hidden"),t.lastPage.textContent>=D-1?t.ellipsisEnd.classList.add("visually-hidden"):(t.ellipsisEnd.classList.remove("visually-hidden"),(0,w.default)())}function T(){const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};E>1&&t.leftBtn.removeAttribute("disabled"),E!==D?(t.rightBtn.removeAttribute("disabled"),(0,w.default)()):t.rightBtn.setAttribute("disabled","disabled")}function x(t){const e={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};e.activ&&e.activ.classList.remove("pagination__page--activ"),e.firstPage&&E==e.firstPage.textContent&&e.firstPage.classList.add("pagination__page--activ"),e.thirdPage&&E==e.thirdPage.textContent&&e.thirdPage.classList.add("pagination__page--activ"),e.fourthPage&&E==e.fourthPage.textContent&&e.fourthPage.classList.add("pagination__page--activ"),e.fifthPage&&E==e.fifthPage.textContent&&e.fifthPage.classList.add("pagination__page--activ"),e.lastPag&&E==e.lastPag.textContent&&e.lastPag.classList.add("pagination__page--activ"),e.preFirstPage&&E==e.preFirstPage.textContent&&e.preFirstPage.classList.add("pagination__page--activ"),e.preLastPag&&E==e.preLastPag.textContent&&e.preLastPag.classList.add("pagination__page--activ"),(0,w.default)()}var $=a("5SzY7"),B=(w=a("6WRUV"),a("6wBaG"));B=a("6wBaG");const O=new(0,$.default);let E=1;const C={form:document.querySelector(".header_search"),pagination:document.querySelector("#pagination"),paginationLib:document.querySelector("#pagination")};function M(t,e,n){t&&t.addEventListener(e,n)}C.paginationLib.removeEventListener("click",B.onLaibreryLink),C.paginationLib.removeEventListener("click",B.onLaibreryBtn),M(C.pagination,"click",(function(t){if(t.preventDefault(),O.spinOn(),"A"!==t.target.nodeName)return;E=Number(t.target.textContent),""===W?(O.spinOn(),S()):(O.spinOn(),L(t));D>1&&D<8?m():1!==D&&(g(),q());(0,w.default)(),x(),T(),O.spinOff()})),M(C.pagination,"click",(function(t){if(t.preventDefault(),O.spinOn(),"BUTTON"!==t.target.nodeName)return;const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};t.target===e.rightBtn&&(E+=1);t.target===e.leftBtn&&(E-=1);""===W?(O.spinOn(),S()):(O.spinOn(),L(t));D>1&&D<8?m():1!==D&&(p(),q());(0,w.default)(),x(),T(),O.spinOff()})),M(C.form,"submit",(t=>E=1));var N=a("757wC");y=a("ccJnQ");const k=new(0,($=a("5SzY7")).default);async function H(){k.spinOn();const t=await J(V),e=await v(t);k.spinOff(),(0,y.renderItems)(e)}const F={enLangBTN:document.getElementById("e-lang-en"),uaLangBTN:document.getElementById("e-lang-ua")};F.enLangBTN.addEventListener("click",I.bind(null,"en")),F.uaLangBTN.addEventListener("click",I.bind(null,"ua"));const R=document.querySelector(".header_search-input");function I(t){let e;if(N.text.hasOwnProperty(t))for(e in window.hasOwnProperty("localStorage")&&window.localStorage.setItem("lang",t),N.text[t]){let n=document.querySelector(e);null!==n&&(n.textContent=N.text[t][e]),"ua"===t?(document.querySelector("html").setAttribute("lang","ua"),R.placeholder="Пошук Фільму",F.enLangBTN.style.cssText="color: #fff;",F.uaLangBTN.style.cssText="color: #ff6b01;\n  "):(document.querySelector("html").setAttribute("lang","en"),R.placeholder="Movie search",F.uaLangBTN.style.cssText="color: #fff;",F.enLangBTN.style.cssText="color: #ff6b01;"),H()}}async function j(t){let e=localStorage.getItem("lang");return lang="ua"===e?"uk":"en",await(await fetch(Z+`3/trending/movie/day?api_key=${t}&language=${lang}&page=${E}`)).json()}async function A(t,e){const n=await(await fetch(Z+`3/genre/movie/list?api_key=${t}&language=${e}`)).json();return l.default.save("genresList",n.genres),console.log("Genres were updated, and saved to localStorage for future"),n.genres}async function G(t,e,n){n="en"===localStorage.getItem("lang")?"en":"uk";return await(await fetch(Z+`3/search/movie?api_key=${t}&language=e${n}&query=${e}`)).json()}y=a("ccJnQ");a("7GRT7");const U=new(0,($=a("5SzY7")).default),z=document.querySelector("#pagination");let D,W="",Y="";async function J(t){const e=await j(t);return D=e.total_pages,e.results}b=a("jWOqs");var Q=a("z2zGY");w=a("6WRUV");const V="565e4989d784811de7dff7d665000157",Z="https://api.themoviedb.org/",K={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search")};K.mainContainer.addEventListener("click",s.openModal),K.openModalBtn.addEventListener("click",i.openModalFooter),K.form.addEventListener("submit",(async function(t){if(t.preventDefault(),U.spinOn(),Y=t.target.search.value,K.searchResultText.classList.add("visually-hidden"),!Y)return H(),W="",void U.spinOff();const e=await async function(){const t=await G(V,Y);return D=t.total_pages,t.results}(),n=await v(e);if(e.length>0&&(W=t.target.search.value),n.length>0)return(0,y.renderItems)(n),z.innerHTML="",D>1&&D<8?m():1!==D&&_(),void U.spinOff();K.searchResultText.classList.remove("visually-hidden"),U.spinOff()})),H(),startPage(),(0,b.default)(),(0,Q.default)(),(0,w.default)();
//# sourceMappingURL=index.a4c352cf.js.map

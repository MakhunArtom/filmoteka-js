!function(){function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequired76b;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired76b=o),o.register("cJBkb",(function(t,n){e(t.exports,"openModalFooter",(function(){return o}));var a={overlay:document.querySelector(".modal-footer-overlay"),modalFooter:document.querySelector(".modal-footer"),modalBtnClose:document.querySelector(".js-modal-close")};function o(){a.overlay.classList.add("active"),a.modalFooter.classList.add("active"),document.body.classList.add("modal-is-open"),document.body.addEventListener("keydown",r),a.overlay.addEventListener("click",i),a.modalBtnClose.addEventListener("click",i)}function r(e){"Escape"===e.code&&i()}function i(){document.querySelector(".modal-footer.active").classList.remove("active"),document.querySelector(".modal-footer-overlay").classList.remove("active"),document.body.classList.remove("modal-is-open")}})),o.register("jGe89",(function(t,n){e(t.exports,"openModal",(function(){return s}));var a=o("8HZsX"),r=o("7M2tn"),i=o("gQxnC"),c=document.querySelector(".cross"),l=document.querySelector(".backdrop"),d=document.querySelector(".modal-container");function s(e){if(e.target.classList.contains("filmoteka__item")){var t,n,a,o,r,s,f,b,y,_,L,h,w=+e.target.dataset.id;t=w,n=i.default.load("currentPage").find((function(e){return e.id===t})),a=n.id,o=n.title,r=n.originalTitle,s=n.genres,f=n.popularity,b=n.overview,y=n.rating,_=n.voteCount,L=n.imgPath,h='\n  <div class="modal-img-container">\n  <img\n    class="modal-img"\n    src="'.concat(L,'"\n    alt="').concat(o,'"\n    width="370"\n    height="470"\n  />\n</div>\n<div class="film-info">\n  <h2 class="film-name">').concat(o,'</h2>\n  <table class="modal-table">\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Vote / Votes</p></td>\n      <td>\n        <p class="modal-table__value">\n          <span class="modal-table__vote">').concat(y,'</span> /\n          <span class="modal-table__votes">').concat(_,'</span>\n        </p>\n      </td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Popularity</p></td>\n      <td><p class="modal-table__value">').concat(f,'</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Original Title</p></td>\n      <td><p class="modal-table__value">').concat(r,'</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Genre</p></td>\n      <td><p class="modal-table__value">').concat(s||"",'</p></td>\n    </tr>\n  </table>\n\n  <h3 class="film-about">About</h3>\n  <p class="film-description">\n    ').concat(b,'\n  </p>\n  <div class="modal-btn-wrap">\n    <button type="button" class="modal-btn js-watch" data-id="').concat(a,'">ADD TO WATCHED</button>\n    <button type="button" class="modal-btn js-queue" data-id="').concat(a,'">ADD TO QUEUE</button>\n  </div>\n</div>'),d.insertAdjacentHTML("beforeend",h),function(e){var t,n,a=document.querySelector(".js-watch"),o=document.querySelector(".js-queue");a.addEventListener("click",u),o.addEventListener("click",m);var r=i.default.load("watched"),c=i.default.load("queued");r&&(n=!!r.find((function(t){return t.id==e}))),c&&(t=!!c.find((function(t){return t.id==e}))),n&&(a.classList.add("watched"),a.innerText="WATCHED"),t&&(o.classList.add("queued"),o.innerText="QUEUED")}(t),l.classList.remove("visually-hidden"),document.body.style.overflow="hidden",(c=document.querySelector(".cross")).addEventListener("click",v),l.addEventListener("click",g),window.addEventListener("keydown",p)}}function u(e){var t=e.target.dataset.id,n=document.querySelector(".js-watch");if(!n.classList.contains("watched"))return(0,r.addMovieToLib)(t,"watched"),n.classList.add("watched"),n.innerText="WATCHED",void f();n.classList.remove("watched"),n.innerText="ADD TO WATCHED",(0,r.removeMovieFromLib)(t,"watched"),f()}function m(e){var t=e.target.dataset.id,n=document.querySelector(".js-queue");if(!n.classList.contains("queued"))return(0,r.addMovieToLib)(t,"queued"),n.classList.add("queued"),n.innerText="QUEUED",void f();n.classList.remove("queued"),n.innerText="ADD TO QUEUE",(0,r.removeMovieFromLib)(t,"queued"),f()}function f(){if(window.location.href.indexOf("library")>-1){var e=document.querySelector("#btnQueued").classList.contains("active-btn");currentLibPage=e?"queued":"watched",(0,a.libraryRender)(currentLibPage)}}function v(){l.classList.add("visually-hidden"),document.body.style.overflow="",l.removeEventListener("click",g),c.removeEventListener("click",v),window.removeEventListener("keydown",p),d.innerHTML='<button type="button" class="cross">+</button>'}function p(e){"Escape"===e.code&&v()}function g(e){e.target.classList.contains("backdrop")&&v()}})),o.register("8HZsX",(function(t,n){e(t.exports,"libraryRender",(function(){return i}));var a=o("gQxnC"),r=o("gzo5i");function i(e){var t=document.querySelector(".filmoteka__container"),n=a.default.load(e);n?(0,r.renderItems)(n):t.innerHTML='<div><p2 class="empty_text">It seems that there is no films here!</p2></div>'}})),o.register("gQxnC",(function(t,n){e(t.exports,"default",(function(){return a}));var a={save:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(t){console.log("Error during saving ".concat(e," to local strage; "),t.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(t){console.log("Error during getting ".concat(e," from localStorage: "),t.message)}},del:function(e){try{localStorage.removeItem(e)}catch(t){console.log("Error during deleting ".concat(e,"! from localStorage: "),t.message)}}}})),o.register("gzo5i",(function(t,n){function a(e){var t=document.querySelector(".filmoteka__container"),n=e.map((function(e){var t=e.id,n=e.title,a=e.year,o=e.genres,r=e.rating,i=e.imgPath;if(o)for(var c=(o.match(/\,/g)||[]).length;c>1;)c=((o=o.slice(0,o.lastIndexOf(","))+"npm ...").match(/\,/g)||[]).length;var l='\n         <div class="filmoteka__item" data-id="'.concat(t,'">\n              <div class="filmoteka__item-wrapper">\n                  <img class="filmoteka-img" src="').concat(i,'" alt="">\n                  <div class="overlay-text">\n                      <h2 class="subtitle">').concat(n,'</h2>\n                      <p class="discription">');return o&&(l+="".concat(o," "),a&&(l+="|")),a&&(l+='<span class="filmoteka__year"> '.concat(a,"</span>")),l+=' </p>\n                      <div class="filmoteka__rating">'.concat(r,"</div>\n                  </div>\n              </div>\n      </div>")}));t.innerHTML="",t.insertAdjacentHTML("beforeend",n.join(""))}e(t.exports,"renderItems",(function(){return a}))})),o.register("7M2tn",(function(t,n){e(t.exports,"removeMovieFromLib",(function(){return r})),e(t.exports,"addMovieToLib",(function(){return i}));var a=o("gQxnC");function r(e,t){var n=a.default.load(t).filter((function(t){return t.id!==+e}));n=n.length>0?n:null,a.default.save(t,n)}function i(e,t){var n=a.default.load(t),o=a.default.load("currentPage").find((function(t){return t.id==e}));n?n.push(o):n=[o],a.default.save(t,n)}}))}();
//# sourceMappingURL=library.0f1b63bd.js.map

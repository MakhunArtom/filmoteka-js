var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},a=e.parcelRequired76b;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in t){var a=t[e];delete t[e];var i={id:e,exports:{}};return n[e]=i,a.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){t[e]=n},e.parcelRequired76b=a);var i=a("34clH"),s=a("eTE0Z");const l={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search"),enLangBTN:document.getElementById("e-lang-en"),uaLangBTN:document.getElementById("e-lang-ua")};var r=a("7GRT7");function o(e,n,t,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<ul class="pagination__list">\n <li class='pagination__item'>\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n </li>\n <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n  <li class='pagination__item'>\n  <a class='pagination__page' id="firstPage" href=''>${e}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='thirdPage' href=''>${n}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fourthPage' href=''>${t}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n </li>\n <li class='pagination__item' id="preLastItem">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n </li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n <li class='pagination__item' id="lastItem">\n  <a class='pagination__page' id="preLastPag" href=''>${D}</a>\n </li>\n</ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function g(e,n,t,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n</li>\n  <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>${e}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='thirdPage' href=''>${n}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fourthPage' href=''>${t}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${D}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}var c=a("6WRUV");const p=document.querySelector("#pagination");function d(e){const n=document.querySelector("#firstPage"),t=document.querySelector("#lastPag"),a={peg2:O,peg3:O,peg4:O,peg5:O,peg6:O};Number(t.textContent)===O&&m(a),(O===D||O>=D-4)&&f(a),Number(n.textContent)===O&&_(a),(1===O||O<=5)&&h()}function u(e){const n=document.querySelector("#firstPage"),t=document.querySelector("#lastPag"),a={peg2:O,peg3:O,peg4:O,peg5:O,peg6:O};O>=D-5&&f(a),O>Number(t.textContent)&&m(a),O<=5&&h(),O<Number(n.textContent)&&_(a)}function f(e){if(O>D)return;let{peg2:n,peg3:t,peg4:a,peg5:i,peg6:s}=e;p.innerHTML="",s=D-1,i=D-2,a=D-3,t=D-4,n=D-5,p.innerHTML=g(n,t,a,i,s)}function _(e){if(O<=2)return;p.innerHTML="";let{peg2:n,peg3:t,peg4:a,peg5:i,peg6:s}=e;i-=1,a-=2,t-=3,n-=4,p.innerHTML=o(n,t,a,i,s)}function m(e){if(O>=D-1)return;p.innerHTML="";let{peg2:n,peg3:t,peg4:a,peg5:i,peg6:s}=e;t+=1,a+=2,i+=3,s+=4,p.innerHTML=o(n,t,a,i,s)}function h(){if(D<7)return;p.innerHTML="",p.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n</li>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>2</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="thirdPage" href=''>3</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fourthPage" href=''>4</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fifthPage" href=''>5</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>6</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="preLastPag" href=''>${D}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`;const e=document.querySelector(".is-none");e&&e.classList.remove("is-none"),(0,c.controlColor)()}function v(){p.innerHTML="",p.innerHTML="<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n  <ul class=\"pagination__list\">\n  <li class='pagination__item'>\n  <a class=\"pagination__page pagination__page--activ \" id=\"preFirstPage\" href=''>1</a>\n  </li>\n  </ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>";const e=[,,'id="firstPage"',"id ='thirdPage'","id ='fourthPage'","id ='fifthPage'",'id="lastPag"','id="preLastPag"'],n=document.querySelector(".pagination__list");let t="";for(let n=2;n<D+1;n+=1)t+=`<li class='pagination__item'><a class="pagination__page"  href='' ${e[n]}>${n}</a></li>`;n.insertAdjacentHTML("beforeend",t)}r=a("7GRT7");async function y(e){r.default.load("genresList")||await j("565e4989d784811de7dff7d665000157");let n=r.default.load("genresList"),t=new Array;return e.forEach((async e=>{try{t.push(n.find((n=>n.id===e)).name)}catch(a){console.log(`${e} wasn't found in Local Storage, updating ganresList`),n=await j("565e4989d784811de7dff7d665000157"),t.push(n.find((n=>n.id===e)).name)}})),t.join(", ")}r=a("7GRT7");async function b(e){const n=await Promise.all(e.map((async({id:e,title:n,original_title:t,name:a,original_name:i,overview:s,poster_path:l,genre_ids:r,popularity:o,release_date:g,first_air_date:c,vote_average:p,vote_count:d})=>{const u=n||a,f=t||i,_=g||c,m=l?"https://image.tmdb.org/t/p/w300"+l:"",h=r.length>1&&await y(r),v=p?p.toFixed(1):0;return await{id:e,title:u,originalTitle:f,year:_?_.slice(0,4):void 0,genres:h,popularity:o,overview:s,rating:v,voteCount:d,imgPath:m}})));return r.default.save("currentPage",n),n}var P=a("ccJnQ"),L=a("jWOqs");const S=new(0,(x=a("5SzY7")).default);async function w(e){e.preventDefault();const n=await async function(){return(await async function(e){return await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${e}&language=en-US&query=${z}&page=${O}`)).json()}("565e4989d784811de7dff7d665000157")).results}(),t=await b(n);if(t.length)return(0,P.renderItems)(t),S.spinOff(),void(0,L.default)()}async function q(){const e=await J("565e4989d784811de7dff7d665000157"),n=await b(e);(0,P.renderItems)(n),S.spinOff(),(0,L.default)()}function T(){const e={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};e.firstPage.textContent>2&&e.ellipsisStart.classList.remove("visually-hidden"),e.lastPage.textContent>=D-1?e.ellipsisEnd.classList.add("visually-hidden"):e.ellipsisEnd.classList.remove("visually-hidden")}function $(){const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};O>1&&e.leftBtn.removeAttribute("disabled"),O!==D?e.rightBtn.removeAttribute("disabled"):e.rightBtn.setAttribute("disabled","disabled")}function C(e){const n={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};n.activ&&n.activ.classList.remove("pagination__page--activ"),n.firstPage&&O==n.firstPage.textContent&&n.firstPage.classList.add("pagination__page--activ"),n.thirdPage&&O==n.thirdPage.textContent&&n.thirdPage.classList.add("pagination__page--activ"),n.fourthPage&&O==n.fourthPage.textContent&&n.fourthPage.classList.add("pagination__page--activ"),n.fifthPage&&O==n.fifthPage.textContent&&n.fifthPage.classList.add("pagination__page--activ"),n.lastPag&&O==n.lastPag.textContent&&n.lastPag.classList.add("pagination__page--activ"),n.preFirstPage&&O==n.preFirstPage.textContent&&n.preFirstPage.classList.add("pagination__page--activ"),n.preLastPag&&O==n.preLastPag.textContent&&n.preLastPag.classList.add("pagination__page--activ")}var x=a("5SzY7"),M=a("JvLcY");M=a("JvLcY");const E=new(0,x.default);let O=1;const B={form:document.querySelector(".header_search"),pagination:document.querySelector("#pagination"),paginationLib:document.querySelector("#pagination")};function k(e,n,t){e&&e.addEventListener(n,t)}function H(e,n,t){e&&e.removeEventListener(n,t)}H(B.paginationLib,"click",M.onlibraryLink),H(B.paginationLib,"click",M.onlibraryBtn),k(B.pagination,"click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;O=Number(e.target.textContent),z?(E.spinOn(),w(e)):(E.spinOn(),q());D>1&&D<8?v():1!==D&&(d(),T());C(),$(),E.spinOff()})),k(B.pagination,"click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;const n={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};e.target===n.rightBtn&&(O+=1);e.target===n.leftBtn&&(O-=1);z?(E.spinOn(),w(e)):(E.spinOn(),q());D>1&&D<8?v():1!==D&&(u(),T());C(),$(),E.spinOff()})),k(B.form,"submit",(e=>O=1));let F="ua";async function N(e){let n=localStorage.getItem("lang");return F="ua"===n?"uk":"en",await(await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${e}&language=${F}&page=${O}`)).json()}async function j(e,n){const t=await(await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${e}&language=${n}`)).json();return r.default.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}async function I(e,n,t){t="en"===localStorage.getItem("lang")?"en":"uk";return await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${e}&language=e${t}&query=${n}`)).json()}P=a("ccJnQ"),P=a("ccJnQ");const R=new(0,(x=a("5SzY7")).default);async function Y(){R.spinOn();const e=await J("565e4989d784811de7dff7d665000157"),n=await b(e);R.spinOff(),(0,P.renderItems)(n),h()}a("7GRT7");const A=new(0,(x=a("5SzY7")).default),G=document.querySelector("#pagination");let D,z,U="";async function J(e){const n=await N(e);return n.total_pages>0&&(D=n.total_pages),n.results}L=a("jWOqs");var W=a("z2zGY"),Z=(c=a("6WRUV"),a("2l4hZ"));r=a("7GRT7");let Q=(0,Z.langCurrent)();function V(){const e=document.querySelector(".js-filter-years");e.innerHTML="";let n=(0,Z.langCurrent)(),t="All Years";"ua"==(0,Z.langCurrent)()&&(t="Усі роки",n="uk");let a=(new Date).getFullYear();e.innerHTML=(()=>{let e=`<option class="js-filter-year" value="" selected>${t}</option>`;for(let n=a;n>=1907;n-=1)e+=`<option value="${n}">${n}</option>`;return e})()}async function K(){const e=document.querySelector(".js-filter-genres");e.innerHTML="";let n=(0,Z.langCurrent)(),t="All Genres",a=[];"ua"==(0,Z.langCurrent)()&&(t="Усі жанри",n="uk"),Q===(0,Z.langCurrent)()&&r.default.load("genresList")?a=r.default.load("genresList"):(a=await j("565e4989d784811de7dff7d665000157",n),Q=(0,Z.langCurrent)());let i=`<option class="js-filter-genres--default" value="" selected>${t}</option>`;i+=a.map((e=>`<option value="${e.id}">${e.name}</option>`)).join(""),e.innerHTML=i}a("f5Zbu");Z=a("2l4hZ");function X(e){(0,Z.setIndexLang)(e),K(),V(),Y()}K(),V(),l.mainContainer.addEventListener("click",s.openModal),l.openModalBtn.addEventListener("click",i.openModalFooter),l.form.addEventListener("submit",(async function(e){if(e.preventDefault(),A.spinOn(),U=e.target.search.value,l.searchResultText.classList.add("visually-hidden"),!U)return Y(),z="",void A.spinOff();const n=await async function(){const e=await I("565e4989d784811de7dff7d665000157",U);e.total_pages>0&&(D=e.total_pages);return e.results}(),t=await b(n);if(n.length&&(z=e.target.search.value),t.length)return(0,P.renderItems)(t),G.innerHTML="",D>1&&D<8?v():1!==D&&h(),void A.spinOff();l.searchResultText.classList.remove("visually-hidden"),A.spinOff()})),l.enLangBTN.addEventListener("click",(()=>X("en"))),l.uaLangBTN.addEventListener("click",(()=>X("ua")));const ee=(0,Z.langCurrent)();Y(),(0,Z.setIndexLang)(ee),(0,L.default)(),(0,W.default)(),(0,c.controlColor)(),(0,c.controlColorFilter)();
//# sourceMappingURL=index.dc80fdf0.js.map

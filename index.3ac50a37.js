function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired76b;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired76b=a),a.register("b5dhH",(function(t,r){e(t.exports,"getPopularMovies",(function(){return i}));var n=a("cTOKP"),o=a("kuM9g");async function i(e){const t=await(0,n.fetchPopular)(e),r=(t.total_pages,t.results),a=await Promise.all(r.map((async({id:e,title:t,original_title:r,name:n,original_name:a,overview:i,poster_path:s,genre_ids:l,popularity:c,release_date:u,first_air_date:d,vote_average:g,vote_count:f})=>{const p=t||n,m=r||a,v=u||d,h=s?"https://image.tmdb.org/t/p/w300"+s:"",y=l?await(0,o.decodeGenres)(l):null,w=g||null;return await{id:e,title:p,originalTitle:m,year:v.slice(0,4),genres:y,popularity:c,overview:i,rating:w,voteCount:f,imgPath:h}})));return console.log(a),a}a("btpe3")})),a.register("cTOKP",(function(t,r){e(t.exports,"fetchPopular",(function(){return i})),e(t.exports,"fetchGenresList",(function(){return s}));var n=a("btpe3"),o=a("7zXLT");async function i(e){return await(await fetch(n.APIURL+`3/trending/movie/day?api_key=${e}`)).json()}async function s(e){const t=await(await fetch(n.APIURL+`3/genre/movie/list?api_key=${e}&language=en-US`)).json();return o.default.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}})),a.register("btpe3",(function(t,r){e(t.exports,"APIKEY",(function(){return i})),e(t.exports,"APIURL",(function(){return s}));var n=a("b5dhH"),o=a("7zXLT");const i="565e4989d784811de7dff7d665000157",s="https://api.themoviedb.org/",l={mainContainer:document.querySelector(".filmoteka__container")};!async function(){const e=await(0,n.getPopularMovies)(i);o.default.save("currentPage",e),console.log(e);const t=e.map((({id:e,title:t,year:r,genres:n,popularity:a,imgPath:o})=>`<div class="filmoteka__item" data-id="${e}">\n        <a class="filmoteka__item-link" href="./">\n            <div class="filmoteka__item-wrapper">\n                <img class="filmoteka-img" src="${o}" alt="" width="395px">\n                <div class="overlay-text">\n                    <h2 class="subtitle">${t}</h2>\n                    <p class="discription">${n} | ${r}</p>\n                </div>\n            </div>\n        </a>\n    </div>`));l.mainContainer.insertAdjacentHTML("beforeend",t.join(""))}()})),a.register("7zXLT",(function(t,r){e(t.exports,"default",(function(){return n}));var n={save:(e,t)=>{try{const r=JSON.stringify(t);localStorage.setItem(e,r)}catch(t){console.error(`Error during saving ${e} to local strage; `,t.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(t){console.error(`Error during getting ${e} from localStorage: `,t.message)}},del:e=>{try{localStorage.removeItem(e)}catch(t){console.error(`Error during deleting ${e}! from localStorage: `,t.message)}}}})),a.register("kuM9g",(function(t,r){e(t.exports,"decodeGenres",(function(){return s}));var n=a("cTOKP"),o=a("7zXLT"),i=a("btpe3");async function s(e){o.default.load("genresList")||await(0,n.fetchGenresList)(i.APIKEY);const t=o.default.load("genresList");let r=new Array;return e.forEach((e=>{try{r.push(t.find((t=>t.id===e)).name)}catch(a){console.log(`${e} wasn't found in Local Storage, updating ganresList`),t=await(0,n.fetchGenresList)(i.APIKEY),r.push(t.find((t=>t.id===e)).name)}})),r.join()}})),a("btpe3");
//# sourceMappingURL=index.3ac50a37.js.map

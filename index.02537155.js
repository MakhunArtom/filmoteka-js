var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired76b;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired76b=n);var i=n("7GRT7"),s=n("ccJnQ");n("7GRT7");const r=new(0,(q=n("5SzY7")).default);let o,l="",c="";async function g(e){const t=await C(e);return o=t.total_pages,t.results}function p(e,t,a,n,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${a}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${n}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function d(e,t,a,n,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${a}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${n}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}const u=document.querySelector("#pagination");function f(e){const t=document.querySelector("#firstPage"),a=document.querySelector("#lastPag"),n={peg2:x,peg3:x,peg4:x,peg5:x,peg6:x};(x===o||x>=o-4)&&h(n),Number(a.textContent)===x&&v(n),Number(t.textContent)===x&&m(n),(1===x||x<=5)&&y()}function _(e){const t=document.querySelector("#firstPage"),a=document.querySelector("#lastPag"),n={peg2:x,peg3:x,peg4:x,peg5:x,peg6:x};x>=o-5&&h(n),x>Number(a.textContent)&&v(n),x<=2&&y(),x<Number(t.textContent)&&m(n)}function h(e){if(x>o)return;let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;u.innerHTML="",s=o-1,i=o-2,n=o-3,a=o-4,t=o-5,u.innerHTML=d(t,a,n,i,s)}function m(e){if(x<=2)return;u.innerHTML="";let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;i-=1,n-=2,a-=3,t-=4,u.innerHTML=p(t,a,n,i,s)}function v(e){if(x>=o-1)return;u.innerHTML="";let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;a+=1,n+=2,i+=3,s+=4,u.innerHTML=p(t,a,n,i,s)}function y(){o<7||(u.innerHTML="",u.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n<a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>2</a>\n<a class='pagination__page' id="thirdPage" href=''>3</a>\n<a class='pagination__page' id="fourthPage" href=''>4</a>\n<a class='pagination__page' id="fifthPage" href=''>5</a>\n<a class='pagination__page' id="lastPag" href=''>6</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`)}s=n("ccJnQ");async function P(e){e.preventDefault();const t=await async function(){return(await async function(e){return await(await fetch(j+`3/search/movie?api_key=${e}&language=en-US&query=${l}&page=${x}`)).json()}(U)).results}(),a=await B(t);a.length>0&&(0,s.renderItems)(a)}var b=n("6WRUV");function S(){const e={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};e.firstPage.textContent>2&&e.ellipsisStart.classList.remove("visually-hidden"),e.lastPage.textContent>=o-1?e.ellipsisEnd.classList.add("visually-hidden"):(e.ellipsisEnd.classList.remove("visually-hidden"),(0,b.default)())}function L(){const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};x>1&&e.leftBtn.removeAttribute("disabled"),x!==o?(e.rightBtn.removeAttribute("disabled"),(0,b.default)()):e.rightBtn.setAttribute("disabled","disabled")}function w(e){const t={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};t.activ&&t.activ.classList.remove("pagination__page--activ"),x==t.firstPage.textContent&&t.firstPage.classList.add("pagination__page--activ"),x==t.thirdPage.textContent&&t.thirdPage.classList.add("pagination__page--activ"),x==t.fourthPage.textContent&&t.fourthPage.classList.add("pagination__page--activ"),x==t.fifthPage.textContent&&t.fifthPage.classList.add("pagination__page--activ"),x==t.lastPag.textContent&&t.lastPag.classList.add("pagination__page--activ"),x==t.preFirstPage.textContent&&t.preFirstPage.classList.add("pagination__page--activ"),x==t.preLastPag.textContent&&t.preLastPag.classList.add("pagination__page--activ"),(0,b.default)()}var q=n("5SzY7");b=n("6WRUV");const T=new(0,q.default);let x=1;const $={pagination:document.querySelector("#pagination"),mainContainer:document.querySelector(".filmoteka__container")};async function C(e){return await(await fetch(j+`3/trending/movie/day?api_key=${e}&page=${x}`)).json()}async function E(e){const t=await(await fetch(j+`3/genre/movie/list?api_key=${e}&language=en-US`)).json();return i.default.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}async function M(e,t){return await(await fetch(j+`3/search/movie?api_key=${e}&language=en-US&query=${t}`)).json()}$.pagination.addEventListener("click",(function(e){if(e.preventDefault(),T.spinOn(),"A"!==e.target.nodeName)return;x=Number(e.target.textContent),$.mainContainer.innerHTML="",console.log(""===l),""===l?G():P(e);(0,b.default)(),f(),S(),w(),L(),T.spinOff()})),$.pagination.addEventListener("click",(function(e){if(e.preventDefault(),T.spinOn(),"BUTTON"!==e.target.nodeName)return;const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};e.target===t.rightBtn&&(x+=1);e.target===t.leftBtn&&(x-=1);$.mainContainer.innerHTML="",""===l?G():P(e);(0,b.default)(),_(),S(),w(),L(),T.spinOff()}));i=n("7GRT7");async function O(e){i.default.load("genresList")||await E(U);let t=i.default.load("genresList"),a=new Array;return e.forEach((async e=>{try{a.push(t.find((t=>t.id===e)).name)}catch(n){console.log(`${e} wasn't found in Local Storage, updating ganresList`),t=await E(U),a.push(t.find((t=>t.id===e)).name)}})),a.join(", ")}i=n("7GRT7");async function B(e){const t=await Promise.all(e.map((async({id:e,title:t,original_title:a,name:n,original_name:i,overview:s,poster_path:r,genre_ids:o,popularity:l,release_date:c,first_air_date:g,vote_average:p,vote_count:d})=>{const u=t||n,f=a||i,_=c||g,h=r?"https://image.tmdb.org/t/p/w300"+r:"",m=o.length>1&&await O(o),v=p?p.toFixed(1):0;return await{id:e,title:u,originalTitle:f,year:_?_.slice(0,4):void 0,genres:m,popularity:l,overview:s,rating:v,voteCount:d,imgPath:h}})));return i.default.save("currentPage",t),t}var R=n("34clH"),H=n("eTE0Z"),k=(s=n("ccJnQ"),n("jWOqs")),F=(q=n("5SzY7"),n("z2zGY"));b=n("6WRUV");const N=new(0,q.default),U="565e4989d784811de7dff7d665000157",j="https://api.themoviedb.org/",D={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search")};async function G(){const e=await g(U),t=await B(e);(0,s.renderItems)(t),N.spinOff(),(0,k.default)()}D.mainContainer.addEventListener("click",H.openModal),D.openModalBtn.addEventListener("click",R.openModalFooter),D.form.addEventListener("submit",(async function(e){if(e.preventDefault(),r.spinOn(),c=e.target.search.value,D.searchResultText.classList.add("visually-hidden"),!c)return G(),y(),l="",void r.spinOff();const t=await async function(){const e=await M(U,c);return o=e.total_pages,e.results}(),a=await B(t);if(t.length>0&&(l=e.target.search.value),a.length>0)return(0,s.renderItems)(a),y(),void r.spinOff();D.searchResultText.classList.remove("visually-hidden"),r.spinOff()})),N.spinOn(),G(),setTimeout(y,500),(0,F.default)(),(0,b.default)();
//# sourceMappingURL=index.02537155.js.map

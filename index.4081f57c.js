!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},a=t.parcelRequired76b;null==a&&((a=function(t){if(t in e)return e[t].exports;if(t in n){var a=n[t];delete n[t];var i={id:t,exports:{}};return e[t]=i,a.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequired76b=a);var i=a("cJBkb"),s=a("jGe89"),l=a("gQxnC");function o(t,e,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<ul class="pagination__list">\n <li class='pagination__item'>\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n </li>\n <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n  <li class='pagination__item'>\n  <a class='pagination__page' id="firstPage" href=''>${t}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='thirdPage' href=''>${e}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n </li>\n <li class='pagination__item' id="preLastItem">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n </li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n <li class='pagination__item' id="lastItem">\n  <a class='pagination__page' id="preLastPag" href=''>${U}</a>\n </li>\n</ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function r(t,e,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n</li>\n  <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>${t}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='thirdPage' href=''>${e}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fourthPage' href=''>${n}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${U}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}const g=document.querySelector("#pagination");function c(t){const e=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:E,peg3:E,peg4:E,peg5:E,peg6:E};Number(n.textContent)===E&&f(a),(E===U||E>=U-4)&&u(a),Number(e.textContent)===E&&d(a),(1===E||E<=5)&&_()}function p(t){const e=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:E,peg3:E,peg4:E,peg5:E,peg6:E};E>=U-5&&u(a),E>Number(n.textContent)&&f(a),E<=2&&_(),E<Number(e.textContent)&&d(a)}function u(t){if(E>U)return;let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;g.innerHTML="",s=U-1,i=U-2,a=U-3,n=U-4,e=U-5,g.innerHTML=r(e,n,a,i,s)}function d(t){if(E<=2)return;g.innerHTML="";let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;i-=1,a-=2,n-=3,e-=4,g.innerHTML=o(e,n,a,i,s)}function f(t){if(E>=U-1)return;g.innerHTML="";let{peg2:e,peg3:n,peg4:a,peg5:i,peg6:s}=t;n+=1,a+=2,i+=3,s+=4,g.innerHTML=o(e,n,a,i,s)}function _(){U<7||(g.innerHTML="",g.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n</li>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>2</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="thirdPage" href=''>3</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fourthPage" href=''>4</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fifthPage" href=''>5</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>6</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="preLastPag" href=''>${U}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`)}function m(){g.innerHTML="",g.innerHTML="<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n  <ul class=\"pagination__list\">\n  <li class='pagination__item'>\n  <a class=\"pagination__page pagination__page--activ \" id=\"preFirstPage\" href=''>1</a>\n  </li>\n  </ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>";const t=[,,'id="firstPage"',"id ='thirdPage'","id ='fourthPage'","id ='fifthPage'",'id="lastPag"','id="preLastPag"'],e=document.querySelector(".pagination__list");let n="";for(let e=2;e<U+1;e+=1)n+=`<li class='pagination__item'><a class="pagination__page"  href='' ${t[e]}>${e}</a></li>`;e.insertAdjacentHTML("beforeend",n)}l=a("gQxnC");async function h(t){l.default.load("genresList")||await A(J);let e=l.default.load("genresList"),n=new Array;return t.forEach((async t=>{try{n.push(e.find((e=>e.id===t)).name)}catch(a){console.log(`${t} wasn't found in Local Storage, updating ganresList`),e=await A(J),n.push(e.find((e=>e.id===t)).name)}})),n.join(", ")}l=a("gQxnC");async function v(t){const e=await Promise.all(t.map((async({id:t,title:e,original_title:n,name:a,original_name:i,overview:s,poster_path:l,genre_ids:o,popularity:r,release_date:g,first_air_date:c,vote_average:p,vote_count:u})=>{const d=e||a,f=n||i,_=g||c,m=l?"https://image.tmdb.org/t/p/w300"+l:"",v=o.length>1&&await h(o),y=p?p.toFixed(1):0;return await{id:t,title:d,originalTitle:f,year:_?_.slice(0,4):void 0,genres:v,popularity:r,overview:s,rating:y,voteCount:u,imgPath:m}})));return l.default.save("currentPage",e),e}var y=a("gzo5i"),b=a("4FHbW");const P=new(0,(B=a("hBZCD")).default);async function L(t){t.preventDefault();const e=await async function(){return(await async function(t){return await(await fetch(K+`3/search/movie?api_key=${t}&language=en-US&query=${z}&page=${E}`)).json()}(J)).results}(),n=await v(e);if(n.length>0)return(0,y.renderItems)(n),P.spinOff(),void(0,b.default)()}async function S(){const t=await G(J),e=await v(t);(0,y.renderItems)(e),P.spinOff(),(0,b.default)()}var w=a("lpZvY");function q(){const t={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};t.firstPage.textContent>2&&t.ellipsisStart.classList.remove("visually-hidden"),t.lastPage.textContent>=U-1?t.ellipsisEnd.classList.add("visually-hidden"):(t.ellipsisEnd.classList.remove("visually-hidden"),(0,w.default)())}function x(){const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};E>1&&t.leftBtn.removeAttribute("disabled"),E!==U?(t.rightBtn.removeAttribute("disabled"),(0,w.default)()):t.rightBtn.setAttribute("disabled","disabled")}function T(t){const e={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};e.activ&&e.activ.classList.remove("pagination__page--activ"),e.firstPage&&E==e.firstPage.textContent&&e.firstPage.classList.add("pagination__page--activ"),e.thirdPage&&E==e.thirdPage.textContent&&e.thirdPage.classList.add("pagination__page--activ"),e.fourthPage&&E==e.fourthPage.textContent&&e.fourthPage.classList.add("pagination__page--activ"),e.fifthPage&&E==e.fifthPage.textContent&&e.fifthPage.classList.add("pagination__page--activ"),e.lastPag&&E==e.lastPag.textContent&&e.lastPag.classList.add("pagination__page--activ"),e.preFirstPage&&E==e.preFirstPage.textContent&&e.preFirstPage.classList.add("pagination__page--activ"),e.preLastPag&&E==e.preLastPag.textContent&&e.preLastPag.classList.add("pagination__page--activ"),(0,w.default)()}var B=a("hBZCD"),C=(w=a("lpZvY"),a("1qjER"));C=a("1qjER");const $=new(0,B.default);let E=1;const O={form:document.querySelector(".header_search"),pagination:document.querySelector("#pagination"),paginationLib:document.querySelector("#pagination")};function k(t,e,n){t&&t.addEventListener(e,n)}O.paginationLib.removeEventListener("click",C.onLaibreryLink),O.paginationLib.removeEventListener("click",C.onLaibreryBtn),k(O.pagination,"click",(function(t){if(t.preventDefault(),$.spinOn(),"A"!==t.target.nodeName)return;E=Number(t.target.textContent),""===z?($.spinOn(),S()):($.spinOn(),L(t));U>1&&U<8?m():1!==U&&(c(),q());(0,w.default)(),T(),x(),$.spinOff()})),k(O.pagination,"click",(function(t){if(t.preventDefault(),$.spinOn(),"BUTTON"!==t.target.nodeName)return;const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};t.target===e.rightBtn&&(E+=1);t.target===e.leftBtn&&(E-=1);""===z?($.spinOn(),S()):($.spinOn(),L(t));U>1&&U<8?m():1!==U&&(p(),q());(0,w.default)(),T(),x(),$.spinOff()})),k(O.form,"submit",(t=>E=1));var M=a("bjqjL");y=a("gzo5i");const N=new(0,(B=a("hBZCD")).default);async function F(){N.spinOn();const t=await G(J),e=await v(t);N.spinOff(),(0,y.renderItems)(e)}const H={enLangBTN:document.getElementById("e-lang-en"),uaLangBTN:document.getElementById("e-lang-ua")};H.enLangBTN.addEventListener("click",I.bind(null,"en")),H.uaLangBTN.addEventListener("click",I.bind(null,"ua"));const j=document.querySelector(".header_search-input");function I(t){let e;if(M.text.hasOwnProperty(t))for(e in window.hasOwnProperty("localStorage")&&window.localStorage.setItem("lang",t),M.text[t]){let n=document.querySelector(e);null!==n&&(n.textContent=M.text[t][e]),"ua"===t?(document.querySelector("html").setAttribute("lang","ua"),j.placeholder="Пошук Фільму",H.enLangBTN.style.cssText="color: #fff;",H.uaLangBTN.style.cssText="color: #ff6b01;\n  "):(document.querySelector("html").setAttribute("lang","en"),j.placeholder="Movie search",H.uaLangBTN.style.cssText="color: #fff;",H.enLangBTN.style.cssText="color: #ff6b01;"),F()}}async function D(t){let e=localStorage.getItem("lang");return lang="ua"===e?"uk":"en",await(await fetch(K+`3/trending/movie/day?api_key=${t}&language=${lang}&page=${E}`)).json()}async function A(t,e){const n=await(await fetch(K+`3/genre/movie/list?api_key=${t}&language=${e}`)).json();return l.default.save("genresList",n.genres),console.log("Genres were updated, and saved to localStorage for future"),n.genres}async function R(t,e,n){n="en"===localStorage.getItem("lang")?"en":"uk";return await(await fetch(K+`3/search/movie?api_key=${t}&language=e${n}&query=${e}`)).json()}y=a("gzo5i");a("gQxnC");const Z=new(0,(B=a("hBZCD")).default),Q=document.querySelector("#pagination");let U,z="",Y="";async function G(t){const e=await D(t);return U=e.total_pages,e.results}b=a("4FHbW");var W=a("jS5ak");w=a("lpZvY");const J="565e4989d784811de7dff7d665000157",K="https://api.themoviedb.org/",V={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search")};V.mainContainer.addEventListener("click",s.openModal),V.openModalBtn.addEventListener("click",i.openModalFooter),V.form.addEventListener("submit",(async function(t){if(t.preventDefault(),Z.spinOn(),Y=t.target.search.value,V.searchResultText.classList.add("visually-hidden"),!Y)return F(),z="",void Z.spinOff();const e=await async function(){const t=await R(J,Y);return U=t.total_pages,t.results}(),n=await v(e);if(e.length>0&&(z=t.target.search.value),n.length>0)return(0,y.renderItems)(n),Q.innerHTML="",U>1&&U<8?m():1!==U&&_(),void Z.spinOff();V.searchResultText.classList.remove("visually-hidden"),Z.spinOff()})),F(),startPage(),(0,b.default)(),(0,W.default)(),(0,w.default)()}();
//# sourceMappingURL=index.4081f57c.js.map

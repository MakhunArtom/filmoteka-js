var e={save:(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(t){console.error(`Error during saving ${e} to local strage; `,t.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(t){console.error(`Error during getting ${e} from localStorage: `,t.message)}},del:e=>{try{localStorage.removeItem(e)}catch(t){console.error(`Error during deleting ${e}! from localStorage: `,t.message)}}};function t(e,t,n,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   \n  </button>\n</div>\n<a class='pagination__page ' href=''>1</a>\n<span class='pagination__ellipsisStart visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' href=''>${t}</a>\n<a class='pagination__page' href=''>${n}</a>\n<a class='pagination__page' href=''>${a}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsisEnd' id="ellipsisEnd">...</span>\n<a class='pagination__lastPage' href=''>${_}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    \n  </button>\n</div>`}const n=document.querySelector("#pagination");function a(){const e=document.querySelector("#firstPage"),t=document.querySelector("#lastPag"),n={peg2:d,peg3:d,peg4:d,peg5:d,peg6:d};if(d===_||d>=_-4)s(n);else{if(Number(t.textContent)===d){if(Number(t.textContent)===_-1)return;r(n)}if(Number(e.textContent)===d){if(2===Number(e.textContent))return;o(n)}(1===d||d<=5)&&l(),(d===_||d>_-2)&&s()}}function i(e){const t=document.querySelector("#firstPage"),n=document.querySelector("#lastPag"),a={peg2:d,peg3:d,peg4:d,peg5:d,peg6:d};if(d===_||d>=_-5)s(a);else{if(d>Number(n.textContent)){if(Number(n.textContent)===_-1)return;r(a)}if(5!==d){if(d<Number(t.textContent)){if(1===d)return;o(a)}}else l()}}function s(e){if(d>_)return;let{peg2:a,peg3:i,peg4:s,peg5:o,peg6:r}=e;n.innerHTML="",r=_-1,o=_-2,s=_-3,i=_-4,a=_-5,n.innerHTML=t(a,i,s,o,r)}function o(e){n.innerHTML="";let{peg2:a,peg3:i,peg4:s,peg5:o,peg6:r}=e;o-=1,s-=2,i-=3,a-=4,n.innerHTML=t(a,i,s,o,r)}function r(e){if(d>_)return;n.innerHTML="";let{peg2:a,peg3:i,peg4:s,peg5:o,peg6:r}=e;i+=1,s+=2,o+=3,r+=4,n.innerHTML=t(a,i,s,o,r)}function l(e){n.innerHTML="",n.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n \n  </button>\n</div>\n<a class='pagination__page ' href=''>1</a>\n<span class='pagination__ellipsisStart visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>2</a>\n<a class='pagination__page' href=''>3</a>\n<a class='pagination__page' href=''>4</a>\n<a class='pagination__page' href=''>5</a>\n<a class='pagination__page' id="lastPag" href=''>6</a>\n<span class='pagination__ellipsisEnd' id="ellipsisEnd">...</span>\n<a class='pagination__lastPage' href=''>${_}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    \n  </button>\n \n</div>`}function c(){const e=document.querySelector("#firstPage"),t=document.querySelector("#lastPag"),n=document.querySelector("#ellipsisStart"),a=document.querySelector("#ellipsisEnd");e.textContent>2&&n.classList.remove("visually-hidden"),t.textContent>=_-1?a.classList.add("visually-hidden"):a.classList.remove("visually-hidden")}let d=1;const g=document.querySelector("#pagination"),p={mainContainer:document.querySelector(".filmoteka__container")};async function u(e){return await(await fetch(T+`3/trending/movie/day?api_key=${e}&page=${d}`)).json()}async function m(t){const n=await(await fetch(T+`3/genre/movie/list?api_key=${t}&language=en-US`)).json();return e.save("genresList",n.genres),console.log("Genres were updated, and saved to localStorage for future"),n.genres}async function f(t){e.load("genresList")||await m(E);const n=e.load("genresList");let a=new Array;return t.forEach((e=>{try{a.push(n.find((t=>t.id===e)).name)}catch(t){console.log(`${e} wasn't found in Local Storage, updating ganresList`),n=await(0,m)(E),a.push(n.find((t=>t.id===e)).name)}})),a.join()}let _;async function v(e){const t=await u(e);_=t.total_pages;const n=t.results;console.log(t);const a=await Promise.all(n.map((async({id:e,title:t,original_title:n,name:a,original_name:i,overview:s,poster_path:o,genre_ids:r,popularity:l,release_date:c,first_air_date:d,vote_average:g,vote_count:p})=>{const u=t||a,m=n||i,_=c||d,v=o?"https://image.tmdb.org/t/p/w300"+o:"",b=r?await f(r):null,y=g||null;return await{id:e,title:u,originalTitle:m,year:_.slice(0,4),genres:b,popularity:l,overview:s,rating:y,voteCount:p,imgPath:v}})));return console.log(a),a}g.addEventListener("click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;d=Number(e.target.textContent),p.mainContainer.innerHTML="",C(),a(),c()})),g.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;const t=document.querySelector(".btn-left"),n=document.querySelector(".btn-right");e.target===n&&(d+=1);e.target===t&&(d-=1);p.mainContainer.innerHTML="",C(),i(),c()}));const b=document.querySelector(".cross"),y=document.querySelector(".backdrop"),h=document.querySelector(".modal-container");function L(t){if(!t.target.classList.contains("filmoteka__item"))return;!function(t){const n=e.load("currentPage").find((e=>e.id===t)),{id:a,title:i,originalTitle:s,year:o,genres:r,popularity:l,overview:c,rating:d,voteCount:g,imgPath:p}=n,u=`<div class="modal-img">\n  <img\n    class="modal-img"\n    src="${p}"\n    alt="${i}"\n    width="370"\n    height="470"\n  />\n</div>\n<div class="film-info">\n  <h2 class="film-name">${i}</h2>\n  <table class="modal-table">\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Vote / Votes</p></td>\n      <td>\n        <p class="modal-table__value">\n          <span class="modal-table__vote">${d}</span> /\n          <span class="modal-table__votes">${g}</span>\n        </p>\n      </td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Popularity</p></td>\n      <td><p class="modal-table__value">${l}</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Original Title</p></td>\n      <td><p class="modal-table__value">${s}</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Genre</p></td>\n      <td><p class="modal-table__value">${r}</p></td>\n    </tr>\n  </table>\n\n  <h3 class="film-about">About</h3>\n  <p class="film-description">\n    ${c}\n  </p>\n  <div class="modal-btn-wrap">\n    <button type="button" class="modal-btn">ADD TO WATCHED</button>\n    <button type="button" class="modal-btn">ADD TO QUEUE</button>\n  </div>\n</div>`;h.insertAdjacentHTML("beforeend",u)}(+t.target.dataset.id),y.classList.remove("visually-hidden"),document.body.style.overflow="hidden",b.addEventListener("click",w),y.addEventListener("click",$),window.addEventListener("keydown",S)}function w(){y.classList.add("visually-hidden"),document.body.style.overflow="",y.removeEventListener("click",$),b.removeEventListener("click",w),window.removeEventListener("keydown",S),h.innerHTML=""}function S(e){"Escape"===e.code&&w()}function $(e){e.target.classList.contains("backdrop")&&w()}const E="565e4989d784811de7dff7d665000157",T="https://api.themoviedb.org/",k={mainContainer:document.querySelector(".filmoteka__container")};async function C(){const t=await v(E);e.save("currentPage",t),console.log(t);const n=t.map((({id:e,title:t,year:n,genres:a,rating:i,imgPath:s})=>`<div class="filmoteka__item" data-id="${e}">\n            <div class="filmoteka__item-wrapper">\n                <img class="filmoteka-img" src="${s}" alt="">\n                <div class="overlay-text">\n                    <h2 class="subtitle">${t}</h2>\n                    <p class="discription">${a}<span class="filmoteka__year"> ${n}</span> </p>\n                    <div class="filmoteka__rating">${i}</div>\n                </div>\n            </div>\n    </div>`));k.mainContainer.insertAdjacentHTML("beforeend",n.join("")),k.mainContainer.addEventListener("click",L)}setTimeout(l,500),C();
//# sourceMappingURL=index.250e6ef3.js.map

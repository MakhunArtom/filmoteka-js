{"mappings":"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","sources":["src/js/localStrg.js","src/js/decodeGenres.js","src/js/getPopularMovies.js","src/js/pagination-js/pagination-markup.js","src/js/pagination-js/counter-pagination.js","src/js/pagination-js/main-pagination.js","src/js/API.js","src/js/search.js","src/js/modal-footer.js","src/js/modal.js","src/js/index.js"],"sourcesContent":["const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(`Error during saving ${key} to local strage; `, error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(`Error during getting ${key} from localStorage: `, error.message);\n  }\n};\n\nconst del = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error(`Error during deleting ${key}! from localStorage: `, error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  del,\n};\n","import { fetchGenresList } from \"./API\";\nimport localStrg, { save, load, del } from \"./localStrg\";\nimport { APIKEY } from \"./index\";\n\nexport async function decodeGenres(genres){\n    if (!localStrg.load (\"genresList\")){\n        await fetchGenresList(APIKEY)\n    }\n    let genresList = localStrg.load (\"genresList\");\n    let genresNames = new Array;\n    \n    genres.forEach(async genre =>  {\n    // try to find genre in localStorage\n    try{\n        genresNames.push((genresList.find(genreListItem => genreListItem.id === genre)).name)\n    }// update localStorage ganres data and try to find one more time\n    catch(error){\n        console.log(`${genre} wasn't found in Local Storage, updating ganresList`)\n        genresList = await fetchGenresList(APIKEY);\n        genresNames.push((genresList.find(genreListItem => genreListItem.id === genre)).name)\n    }\n});\n\n    return(genresNames.join(\", \"))\n}\n","import { fetchPopular } from './API';\nimport { decodeGenres } from './decodeGenres';\n\nimport { APIKEY } from './index';\n\nexport let pageCount;\n\nexport async function getPopularMovies(APIKEY) {\n  const popularMovies = await fetchPopular(APIKEY);\n  pageCount = popularMovies.total_pages;\n  const result = popularMovies.results;\n\n  const currentPage = await Promise.all(\n    result.map(\n      async ({\n        id,\n        title,\n        original_title,\n        name,\n        original_name,\n        overview,\n        poster_path,\n        genre_ids,\n        popularity,\n        release_date,\n        first_air_date,\n        vote_average,\n        vote_count,\n      }) => {\n        const movieTitle = title ? title : name;\n        const movieOriginalTitle = original_title\n          ? original_title\n          : original_name;\n        const movieDate = release_date ? release_date : first_air_date;\n        const imgPath = poster_path\n          ? `https://image.tmdb.org/t/p/w300` + poster_path\n          : '';\n        const genres = genre_ids ? await decodeGenres(genre_ids) : null;\n        const raitng = vote_average ? vote_average.toFixed(1) : 0;\n\n        return await {\n          id: id,\n          title: movieTitle,\n          originalTitle: movieOriginalTitle,\n          year: movieDate.slice(0, 4),\n          genres: genres,\n          popularity: popularity,\n          overview: overview,\n          rating: raitng,\n          voteCount: vote_count,\n          imgPath: imgPath,\n        };\n      }\n    )\n  );\n  return currentPage;\n}\n","import { pageCount } from '../getPopularMovies';\n\nexport function pagMarkup(peg2, peg3, peg4, peg5, peg6) {\n  return `<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   \n  </button>\n</div>\n<a class='pagination__page ' href=''>1</a>\n<span class='pagination__ellipsisStart visually-hidden' id=\"ellipsisStart\">...</span>\n<a class='pagination__page' id=\"firstPage\" href=''>${peg2}</a>\n<a class='pagination__page' href=''>${peg3}</a>\n<a class='pagination__page' href=''>${peg4}</a>\n<a class='pagination__page' href=''>${peg5}</a>\n<a class='pagination__page' id=\"lastPag\" href=''>${peg6}</a>\n<span class='pagination__ellipsisEnd' id=\"ellipsisEnd\">...</span>\n<a class='pagination__lastPage' href=''>${pageCount}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    \n  </button>\n</div>`;\n}\n","import { pageCount } from '../getPopularMovies';\nimport { PAGE } from './main-pagination';\nimport { pagMarkup } from './pagination-markup';\n\n////////////////////////////// СЧЕТЧИК ПАГИНАЦИИ ////////////////////////////////////////////////////////////////////////////////////////\nconst div = document.querySelector('#pagination');\n//////////////////////////// ОТРИСОВКА ПАГИНАЦИИ  ПО СЫЛКЕ\nexport function renderMarkupOnClickLink() {\n  const firstPage = document.querySelector('#firstPage');\n  const lastPage = document.querySelector('#lastPag');\n\n  const pages = {\n    peg2: PAGE,\n    peg3: PAGE,\n    peg4: PAGE,\n    peg5: PAGE,\n    peg6: PAGE,\n  };\n\n  // Последняя страница\n  if (PAGE === pageCount || PAGE >= pageCount - 4) {\n    lastPages(pages);\n    return;\n  }\n\n  // Увиличение счетчика\n  if (Number(lastPage.textContent) === PAGE) {\n    // Останавливаю счетчик на пред последней странице\n    if (Number(lastPage.textContent) === pageCount - 1) {\n      return;\n    }\n    incriment(pages);\n  }\n\n  // Уменьшение счетчика\n  if (Number(firstPage.textContent) === PAGE) {\n    // Останавливаю счетчик на пред первой странице\n    if (Number(firstPage.textContent) === 2) {\n      return;\n    }\n    dicremrnt(pages);\n  }\n\n  // Отрисовка начальных страниц от 1-6\n  if (PAGE === 1 || PAGE <= 5) {\n    startPage();\n  }\n\n  // Последняя страница\n  if (PAGE === pageCount || PAGE > pageCount - 2) {\n    lastPages();\n  }\n}\n\n//////////////////// ОТРИСОВКА ПАГИНАЦИИ  ПО КНОПКЕ\n\nexport function renderPaginationONClickBtn(e) {\n  const firstPage = document.querySelector('#firstPage');\n  const lastPage = document.querySelector('#lastPag');\n\n  const pages = {\n    peg2: PAGE,\n    peg3: PAGE,\n    peg4: PAGE,\n    peg5: PAGE,\n    peg6: PAGE,\n  };\n\n  // // Последняя страница\n  if (PAGE === pageCount || PAGE >= pageCount - 5) {\n    lastPages(pages);\n    return;\n  }\n\n  // увиличеник счетчика\n  if (PAGE > Number(lastPage.textContent)) {\n    if (Number(lastPage.textContent) === pageCount - 1) {\n      return;\n    }\n    incriment(pages);\n  }\n\n  // Отрисовка начальных страниц от 1-6\n  if (PAGE === 5) {\n    startPage();\n    return;\n  }\n\n  // // Уменьшение счетчика\n  if (PAGE < Number(firstPage.textContent)) {\n    if (PAGE === 1) {\n      return;\n    }\n    dicremrnt(pages);\n  }\n}\n\n//////////////////////////////// ОТРИСОВКА ПОСЛЕДНЕЙ СТРАНИЦИ\nfunction lastPages(pages) {\n  if (PAGE > pageCount) {\n    return;\n  }\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  div.innerHTML = '';\n\n  peg6 = pageCount - 1;\n  peg5 = pageCount - 2;\n  peg4 = pageCount - 3;\n  peg3 = pageCount - 4;\n  peg2 = pageCount - 5;\n\n  div.innerHTML = pagMarkup(peg2, peg3, peg4, peg5, peg6);\n}\n\n//////////////////////////////////// УМЕНЬШЕНИЕ СЧЕТЧИКА\nfunction dicremrnt(pages) {\n  div.innerHTML = '';\n\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  peg5 -= 1;\n  peg4 -= 2;\n  peg3 -= 3;\n  peg2 -= 4;\n\n  div.innerHTML = pagMarkup(peg2, peg3, peg4, peg5, peg6);\n}\n\n////////////////////////////////// // УВИЛИЧЕНИЕ СЧЕТЧИКА\n\nfunction incriment(pages) {\n  if (PAGE > pageCount) {\n    return;\n  }\n  div.innerHTML = '';\n\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  peg3 += 1;\n  peg4 += 2;\n  peg5 += 3;\n  peg6 += 4;\n\n  div.innerHTML = pagMarkup(peg2, peg3, peg4, peg5, peg6);\n}\n\n// //////////////////// РАЗМЕТКА ПАГИНАЦИИ ПРИ ПЕРВОМ ЗАПУСКЕ СТРАНИЦЫ (НАЧАЛЬНАЯ СТРАНИЦА)\n\nexport function startPage(e) {\n  div.innerHTML = '';\n\n  div.innerHTML = `<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n \n  </button>\n</div>\n<a class='pagination__page ' href=''>1</a>\n<span class='pagination__ellipsisStart visually-hidden' id=\"ellipsisStart\">...</span>\n<a class='pagination__page' id=\"firstPage\" href=''>2</a>\n<a class='pagination__page' href=''>3</a>\n<a class='pagination__page' href=''>4</a>\n<a class='pagination__page' href=''>5</a>\n<a class='pagination__page' id=\"lastPag\" href=''>6</a>\n<span class='pagination__ellipsisEnd' id=\"ellipsisEnd\">...</span>\n<a class='pagination__lastPage' href=''>${pageCount}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    \n  </button>\n \n</div>`;\n}\n\n//////////////////////////// УБИРАЮ ИЛИ СТАВЛЮ  \"...\"\n\nexport function ellipsis() {\n  const firstPage = document.querySelector('#firstPage');\n  const lastPage = document.querySelector('#lastPag');\n  const ellipsisStart = document.querySelector('#ellipsisStart');\n  const ellipsisEnd = document.querySelector('#ellipsisEnd');\n\n  if (firstPage.textContent > 2) {\n    ellipsisStart.classList.remove('visually-hidden');\n  }\n\n  if (lastPage.textContent >= pageCount - 1) {\n    ellipsisEnd.classList.add('visually-hidden');\n    return;\n  }\n  ellipsisEnd.classList.remove('visually-hidden');\n}\n","import { renderMarkupOnClickLink } from './counter-pagination';\nimport { renderPaginationONClickBtn } from './counter-pagination';\nimport { renderPopularMovies } from '../index';\n\nimport { ellipsis } from './counter-pagination';\n\nexport let PAGE = 1;\nconst div = document.querySelector('#pagination');\nconst refs = {\n  mainContainer: document.querySelector('.filmoteka__container'),\n};\ndiv.addEventListener('click', onClickPaginationLink);\ndiv.addEventListener('click', onClickButtonPagination);\n\n// startPage();\n// ////////////////////// НАВИГАЦИЯ ПО СЫЛКЕ\n\nfunction onClickPaginationLink(e) {\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n  PAGE = Number(e.target.textContent);\n\n  // fetchOnPagination(PAGE).then(respons => console.log(respons));\n  refs.mainContainer.innerHTML = '';\n  renderPopularMovies();\n\n  // СЧЕТЧИК ПАГИНАЦИИ\n  renderMarkupOnClickLink();\n  ellipsis();\n}\n\n// ////////////////////// НАВИГАЦИЯ ПО КНОПКЕ\n\nfunction onClickButtonPagination(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const leftBtn = document.querySelector('.btn-left');\n  const rightBtn = document.querySelector('.btn-right');\n\n  if (e.target === rightBtn) {\n    PAGE += 1;\n  }\n\n  if (e.target === leftBtn) {\n    PAGE -= 1;\n  }\n\n  // fetchOnPagination(PAGE).then(respons => console.log(respons));\n\n  refs.mainContainer.innerHTML = '';\n  renderPopularMovies();\n  // СЧЕТЧИК ПАГИНАЦИИ\n  renderPaginationONClickBtn(e);\n  ellipsis();\n}\n","import { APIURL } from './index';\nimport localStrg from './localStrg';\nimport { PAGE } from './pagination-js/main-pagination';\n\nexport async function fetchPopular(token) {\n  return await (\n    await fetch(APIURL + `3/trending/movie/day?api_key=${token}&page=${PAGE}`)\n  ).json();\n}\n\nexport async function fetchGenresList(token){\n    const response = await (await fetch(APIURL+`3/genre/movie/list?api_key=${token}&language=en-US`)).json();\n    localStrg.save(\"genresList\",response.genres);\n    console.log(\"Genres were updated, and saved to localStorage for future\");\n    return response.genres;\n}\n\nexport async function fetchSearch(token,name) {   \n    const response = await (await fetch(APIURL+`3/search/movie?api_key=${token}&language=en-US&query=${name}`)).json()\n    return response\n}\n","import { fetchSearch } from './API' \nimport { decodeGenres } from './decodeGenres';\nimport localStrg from \"./localStrg\";\nconst KEY = 'c77f748b921c87e18a4a8be3b6f2e99b';\n\nlet name = '';\nconst ref = {\n    form: document.querySelector('.header_search'),\n    mainContainer: document.querySelector(\".filmoteka__container\"),\n    text: document.querySelector('.form-text')\n}\n\nref.form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const {elements: { search }} = e.target;\n    name = search.value; \n    renderPopularMovies()\n    async function renderPopularMovies(){\n    const currentPageContent = await getSearchMovies();\n    \n    if (currentPageContent.length === 0) {\n        ref.text.classList.remove('visually-hidden');\n        return\n    }\n      ref.text.classList.add('visually-hidden');\n      \n    localStrg.save(\"currentPage\",currentPageContent);\n    \n    const markup = currentPageContent.map (({id,title,year,genres,popularity,imgPath}) => {\n        return `<div class=\"filmoteka__item\" data-id=\"${id}\">\n        <a class=\"filmoteka__item-link\" href=\"./\">\n            <div class=\"filmoteka__item-wrapper\">\n                <img class=\"filmoteka-img\" src=\"${imgPath}\" alt=\"\">\n                <div class=\"overlay-text\">\n                    <h2 class=\"subtitle\">${title}</h2>\n                    <p class=\"discription\">${genres}<span class=\"filmoteka__year\"> ${year}</span> </p>\n                    <div class=\"filmoteka__rating\">${popularity}</div>\n                </div>\n            </div>\n        </a>\n    </div>`\n    })\n    ref.mainContainer.innerHTML = '';    \n    ref.mainContainer.insertAdjacentHTML(\"beforeend\",markup.join(\"\"))\n}\n});\n\nexport async function getSearchMovies() {\n  const popularMovies = await fetchSearch(KEY,name);\n  const pageCount = popularMovies.total_pages;\n  const result = popularMovies.results;\n    \n  const currentPage = await Promise.all(\n    result.map(\n      async ({\n        id,\n        title,\n        original_title,\n        name,\n        original_name,\n        overview,\n        poster_path,\n        genre_ids,\n        popularity,\n        release_date,\n        first_air_date,\n        vote_average,\n        vote_count,\n      }) => {\n        const movieTitle = title ? title : name;\n        const movieOriginalTitle = original_title\n          ? original_title\n          : original_name;\n        const movieDate = release_date ? release_date : first_air_date;\n        let imgPath = poster_path ? `https://image.tmdb.org/t/p/w300` + poster_path : '';\n        const genres = genre_ids ? await decodeGenres(genre_ids) : null;\n        const raitng = vote_average ? vote_average : null;\n\n        return await {\n          id: id,\n          title: movieTitle,\n          originalTitle: movieOriginalTitle,\n          year: movieDate.slice(0, 4),\n          genres: genres,\n          popularity: popularity,\n          overview: overview,\n          rating: raitng,\n          voteCount: vote_count,\n          imgPath: imgPath,\n        };\n      }\n    )\n  );\n  \n  return currentPage;\n}\n","const refs = {\n  overlay: document.querySelector('.modal-footer-overlay'),\n  modalFooter: document.querySelector('.modal-footer'),\n};\n\nexport function openModalFooter() {\n  refs.overlay.classList.add('active');\n  refs.modalFooter.classList.add('active');\n  document.body.classList.add('modal-is-open');\n  onModalOpen();\n}\n\nfunction onModalOpen() {\n  document.body.addEventListener('keydown', closeModalOnEsc);\n  refs.overlay.addEventListener('click', closeModal);\n}\n\nfunction closeModalOnEsc(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  document.querySelector('.modal-footer.active').classList.remove('active');\n  document.querySelector('.modal-footer-overlay').classList.remove('active');\n  document.body.classList.remove('modal-is-open');\n}\n","import localStrg from './localStrg';\r\n\r\nconst closeButton = document.querySelector('.cross');\r\nconst modalBackdrop = document.querySelector('.backdrop');\r\nconst modalBox = document.querySelector('.modal-container');\r\n\r\n\r\nexport function openModal(event) {\r\n  if (!event.target.classList.contains('filmoteka__item')) {\r\n    return;\r\n  }\r\n  const movieId = +event.target.dataset.id;\r\n  renderModal(movieId);\r\n\r\n\r\n  modalBackdrop.classList.remove('visually-hidden');\r\n  document.body.style.overflow = 'hidden';\r\n\r\n  closeButton.addEventListener('click', modalClosing);\r\n  modalBackdrop.addEventListener('click', modalClosinByBackdrop);\r\n  window.addEventListener('keydown', modalClosinByEsc);\r\n}\r\n\r\n\r\nfunction renderModal(movieID) {\r\n  const currentPageContent = localStrg.load('currentPage');\r\n  const movieToRender = currentPageContent.find(movie => (movie.id === movieID));\r\n\r\n  const {id,\r\n    title,\r\n    originalTitle,\r\n    year,\r\n    genres,\r\n    popularity,\r\n    overview,\r\n    rating,\r\n    voteCount,\r\n    imgPath}=movieToRender;\r\n\r\n  const modalMarkup = `<div class=\"modal-img\">\r\n  <img\r\n    class=\"modal-img\"\r\n    src=\"${imgPath}\"\r\n    alt=\"${title}\"\r\n    width=\"370\"\r\n    height=\"470\"\r\n  />\r\n</div>\r\n<div class=\"film-info\">\r\n  <h2 class=\"film-name\">${title}</h2>\r\n  <table class=\"modal-table\">\r\n    <tr class=\"modal-table__row\">\r\n      <td><p class=\"modal-table__attribute\">Vote / Votes</p></td>\r\n      <td>\r\n        <p class=\"modal-table__value\">\r\n          <span class=\"modal-table__vote\">${rating}</span> /\r\n          <span class=\"modal-table__votes\">${voteCount}</span>\r\n        </p>\r\n      </td>\r\n    </tr>\r\n    <tr class=\"modal-table__row\">\r\n      <td><p class=\"modal-table__attribute\">Popularity</p></td>\r\n      <td><p class=\"modal-table__value\">${popularity}</p></td>\r\n    </tr>\r\n    <tr class=\"modal-table__row\">\r\n      <td><p class=\"modal-table__attribute\">Original Title</p></td>\r\n      <td><p class=\"modal-table__value\">${originalTitle}</p></td>\r\n    </tr>\r\n    <tr class=\"modal-table__row\">\r\n      <td><p class=\"modal-table__attribute\">Genre</p></td>\r\n      <td><p class=\"modal-table__value\">${genres}</p></td>\r\n    </tr>\r\n  </table>\r\n\r\n  <h3 class=\"film-about\">About</h3>\r\n  <p class=\"film-description\">\r\n    ${overview}\r\n  </p>\r\n  <div class=\"modal-btn-wrap\">\r\n    <button type=\"button\" class=\"modal-btn\">ADD TO WATCHED</button>\r\n    <button type=\"button\" class=\"modal-btn\">ADD TO QUEUE</button>\r\n  </div>\r\n</div>`\r\n  modalBox.insertAdjacentHTML(\"beforeend\",modalMarkup)\r\n}\r\n\r\nfunction modalClosing() {\r\n  modalBackdrop.classList.add('visually-hidden');\r\n  document.body.style.overflow = '';\r\n  modalBackdrop.removeEventListener('click', modalClosinByBackdrop);\r\n  closeButton.removeEventListener('click', modalClosing);\r\n  window.removeEventListener('keydown', modalClosinByEsc);\r\n  modalBox.innerHTML='';\r\n}\r\n\r\nfunction modalClosinByEsc(event) {\r\n  if (event.code === 'Escape') {\r\n    modalClosing();\r\n  }\r\n}\r\n\r\nfunction modalClosinByBackdrop(event) {\r\n  if (event.target.classList.contains('backdrop')) {\r\n    modalClosing();\r\n  }\r\n}\r\n","import localStrg from './localStrg';\nimport \"./search\"\nimport { openModalFooter } from './modal-footer';\nimport { getPopularMovies } from './getPopularMovies';\nimport { openModal } from './modal';\nimport { startPage } from './pagination-js/counter-pagination';\n\nexport const APIKEY = '565e4989d784811de7dff7d665000157';\nexport const APIURL = 'https://api.themoviedb.org/';\n\nconst refs = {\n  mainContainer: document.querySelector('.filmoteka__container'),\n  openModalBtn: document.querySelector('.modal-footer-open')\n};\n\nrenderPopularMovies();\nrefs.openModalBtn.addEventListener('click', openModalFooter);\n\nexport async function renderPopularMovies() {\n  const currentPageContent = await getPopularMovies(APIKEY);\n  localStrg.save('currentPage', currentPageContent);\n  console.log(currentPageContent);\n\n  const markup = currentPageContent.map(\n    ({ id, title, year, genres, rating, imgPath }) => {\n      let countOfComma = (genres.match(/\\,/g) || []).length;\n      while (countOfComma>1) {\n        genres = genres.slice(0, genres.lastIndexOf(\",\"))+\"...\";\n        countOfComma = (genres.match(/\\,/g) || []).length;\n      }\n\n\n      return `<div class=\"filmoteka__item\" data-id=\"${id}\">\n            <div class=\"filmoteka__item-wrapper\">\n                <img class=\"filmoteka-img\" src=\"${imgPath}\" alt=\"\">\n                <div class=\"overlay-text\">\n                    <h2 class=\"subtitle\">${title}</h2>\n                    <p class=\"discription\">${genres} <span class=\"filmoteka__year\"> ${year}</span> </p>\n                    <div class=\"filmoteka__rating\">${rating}</div>\n                </div>\n            </div>\n    </div>`;\n    }\n  );\n  refs.mainContainer.insertAdjacentHTML('beforeend', markup.join(''));\n  refs.mainContainer.addEventListener('click', openModal);\n  startPage();\n}\n"],"names":["$584a2aa5c4bbe395$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","async","$eebbf543936947dc$export$10c61d4a9a9ff219","genres","load","$9641fdd394b90517$export$d60bdeaf43923027","$85a5f86b715fe7db$export$8aa241ee05ce92b7","genresList","genresNames","Array","forEach","genre","push","find","genreListItem","id","name","log","join","$811a776170644594$export$7804ac8eb5cfa918","$811a776170644594$export$76bd8a7b840a3729","APIKEY1","popularMovies","$9641fdd394b90517$export$16bf2264c00353d2","total_pages","result","results","Promise","all","map","title","original_title","original_name","overview","poster_path","genre_ids","popularity","release_date","first_air_date","vote_average","vote_count","movieTitle","movieOriginalTitle","movieDate","imgPath","raitng","toFixed","originalTitle","year","slice","rating","voteCount","$e9e1ba73732ed350$export$c90e0de26581eb18","peg2","peg3","peg4","peg5","peg6","$57e6bfcf14d26f27$var$div","document","querySelector","$57e6bfcf14d26f27$export$d2dfced4bd191a20","firstPage","lastPage","pages","$6f8eac57d8ad4780$export$d3d35020fa5b54f0","$57e6bfcf14d26f27$var$lastPages","Number","textContent","$57e6bfcf14d26f27$var$incriment","$57e6bfcf14d26f27$var$dicremrnt","$57e6bfcf14d26f27$export$bfa07905d8d7dc88","$57e6bfcf14d26f27$export$7526032aa4edafb4","e","innerHTML","$57e6bfcf14d26f27$export$a5b94313d6908893","ellipsisStart","ellipsisEnd","classList","remove","add","$6f8eac57d8ad4780$var$div","$6f8eac57d8ad4780$var$refs","mainContainer","token","fetch","$85a5f86b715fe7db$export$39576a9723c055a0","json","response","save","$9641fdd394b90517$export$6f539dc45dead1c","addEventListener","preventDefault","target","nodeName","$85a5f86b715fe7db$export$12335c527465096d","leftBtn","rightBtn","$b18fd23e9761f35d$var$name","$b18fd23e9761f35d$var$ref","form","text","elements","search","currentPageContent","name1","$b18fd23e9761f35d$export$7bb36ad8ac4c04bb","length","markup","insertAdjacentHTML","renderPopularMovies","$8985e5ea97c458df$var$refs","overlay","modalFooter","$8985e5ea97c458df$var$closeModalOnEsc","event","code","$8985e5ea97c458df$var$closeModal","body","$8a7e756c566dd1ea$var$closeButton","$8a7e756c566dd1ea$var$modalBackdrop","$8a7e756c566dd1ea$var$modalBox","$8a7e756c566dd1ea$export$a7f6cffb6b8ba11c","contains","movieID","movieToRender","movie","modalMarkup","$8a7e756c566dd1ea$var$renderModal","dataset","style","overflow","$8a7e756c566dd1ea$var$modalClosing","$8a7e756c566dd1ea$var$modalClosinByBackdrop","window","$8a7e756c566dd1ea$var$modalClosinByEsc","$85a5f86b715fe7db$var$refs","openModalBtn","countOfComma","match","lastIndexOf"],"version":3,"file":"index.3fa06f2b.js.map"}
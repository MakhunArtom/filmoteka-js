var e={save:(e,a)=>{try{const t=JSON.stringify(a);localStorage.setItem(e,t)}catch(a){console.error(`Error during saving ${e} to local strage; `,a.message)}},load:e=>{try{const a=localStorage.getItem(e);return null===a?void 0:JSON.parse(a)}catch(a){console.error(`Error during getting ${e} from localStorage: `,a.message)}},del:e=>{try{localStorage.removeItem(e)}catch(a){console.error(`Error during deleting ${e}! from localStorage: `,a.message)}}};async function a(e){return await(await fetch(o+`3/trending/movie/day?api_key=${e}`)).json()}async function t(a){const t=await(await fetch(o+`3/genre/movie/list?api_key=${a}&language=en-US`)).json();return e.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}async function n(a){e.load("genresList")||await t(r);const n=e.load("genresList");let i=new Array;return a.forEach((e=>{try{i.push(n.find((a=>a.id===e)).name)}catch(a){console.log(`${e} wasn't found in Local Storage, updating ganresList`),n=await(0,t)(r),i.push(n.find((a=>a.id===e)).name)}})),i.join()}async function i(e){const t=await a(e),i=(t.total_pages,t.results),r=await Promise.all(i.map((async({id:e,title:a,original_title:t,name:i,original_name:r,overview:o,poster_path:s,genre_ids:l,popularity:c,release_date:g,first_air_date:d,vote_average:m,vote_count:u})=>{const p=a||i,f=t||r,v=g||d,_=s?"https://image.tmdb.org/t/p/w300"+s:"",y=l?await n(l):null,h=m||null;return await{id:e,title:p,originalTitle:f,year:v.slice(0,4),genres:y,popularity:c,overview:o,rating:h,voteCount:u,imgPath:_}})));return console.log(r),r}const r="565e4989d784811de7dff7d665000157",o="https://api.themoviedb.org/",s={mainContainer:document.querySelector(".filmoteka__container")};!async function(){const a=await i(r);e.save("currentPage",a),console.log(a);const t=a.map((({id:e,title:a,year:t,genres:n,popularity:i,imgPath:r})=>`<div class="filmoteka__item" data-id="${e}">\n        <a class="filmoteka__item-link" href="./">\n            <div class="filmoteka__item-wrapper">\n                <img class="filmoteka-img" src="${r}" alt="">\n                <div class="overlay-text">\n                    <h2 class="subtitle">${a}</h2>\n                    <p class="discription">${n}<span class="filmoteka__year"> ${t}</span> </p>\n                    <div class="filmoteka__rating">${i}</div>\n                </div>\n            </div>\n        </a>\n    </div>`));s.mainContainer.insertAdjacentHTML("beforeend",t.join(""))}();
//# sourceMappingURL=index.57616634.js.map

var t={save:(t,e)=>{try{const a=JSON.stringify(e);localStorage.setItem(t,a)}catch(e){console.error(`Error during saving ${t} to local strage; `,e.message)}},load:t=>{try{const e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(e){console.error(`Error during getting ${t} from localStorage: `,e.message)}},del:t=>{try{localStorage.removeItem(t)}catch(e){console.error(`Error during deleting ${t}! from localStorage: `,e.message)}}};async function e(t){return await(await fetch(g+`3/trending/movie/day?api_key=${t}`)).json()}async function a(e){const a=await(await fetch(g+`3/genre/movie/list?api_key=${e}&language=en-US`)).json();return t.save("genresList",a.genres),console.log("Genres were updated, and saved to localStorage for future"),a.genres}async function n(e){t.load("genresList")||await a(u);const n=t.load("genresList");let o=new Array;return e.forEach((t=>{try{o.push(n.find((e=>e.id===t)).name)}catch(e){console.log(`${t} wasn't found in Local Storage, updating ganresList`),n=await(0,a)(u),o.push(n.find((e=>e.id===t)).name)}})),o.join()}async function o(t){const a=await e(t),o=(a.total_pages,a.results),i=await Promise.all(o.map((async({id:t,title:e,original_title:a,name:o,original_name:i,overview:s,poster_path:l,genre_ids:r,popularity:d,release_date:c,first_air_date:m,vote_average:u,vote_count:g})=>{const p=e||o,v=a||i,_=c||m,f=l?"https://image.tmdb.org/t/p/w300"+l:"",b=r?await n(r):null,y=u||null;return await{id:t,title:p,originalTitle:v,year:_.slice(0,4),genres:b,popularity:d,overview:s,rating:y,voteCount:g,imgPath:f}})));return console.log(i),i}const i=document.querySelector(".cross"),s=document.querySelector(".backdrop"),l=document.querySelector(".modal-container");function r(e){if(!e.target.classList.contains("filmoteka__item"))return;!function(e){const a=t.load("currentPage").find((t=>t.id===e)),{id:n,title:o,originalTitle:i,year:s,genres:r,popularity:d,overview:c,rating:m,voteCount:u,imgPath:g}=a,p=`<div class="modal-img">\n  <img\n    class="modal-img"\n    src="${g}"\n    alt="${o}"\n    width="370"\n    height="470"\n  />\n</div>\n<div class="film-info">\n  <h2 class="film-name">${o}</h2>\n  <table class="modal-table">\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Vote / Votes</p></td>\n      <td>\n        <p class="modal-table__value">\n          <span class="modal-table__vote">${m}</span> /\n          <span class="modal-table__votes">${u}</span>\n        </p>\n      </td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Popularity</p></td>\n      <td><p class="modal-table__value">${d}</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Original Title</p></td>\n      <td><p class="modal-table__value">${i}</p></td>\n    </tr>\n    <tr class="modal-table__row">\n      <td><p class="modal-table__attribute">Genre</p></td>\n      <td><p class="modal-table__value">${r}</p></td>\n    </tr>\n  </table>\n\n  <h3 class="film-about">About</h3>\n  <p class="film-description">\n    ${c}\n  </p>\n  <div class="modal-btn-wrap">\n    <button type="button" class="modal-btn">ADD TO WATCHED</button>\n    <button type="button" class="modal-btn">ADD TO QUEUE</button>\n  </div>\n</div>`;l.insertAdjacentHTML("beforeend",p)}(+e.target.dataset.id),s.classList.remove("visually-hidden"),document.body.style.overflow="hidden",i.addEventListener("click",d),s.addEventListener("click",m),window.addEventListener("keydown",c)}function d(){s.classList.add("visually-hidden"),document.body.style.overflow="",s.removeEventListener("click",m),i.removeEventListener("click",d),window.removeEventListener("keydown",c),l.innerHTML=""}function c(t){"Escape"===t.code&&d()}function m(t){t.target.classList.contains("backdrop")&&d()}const u="565e4989d784811de7dff7d665000157",g="https://api.themoviedb.org/",p={mainContainer:document.querySelector(".filmoteka__container")};!async function(){const e=await o(u);t.save("currentPage",e),console.log(e);const a=e.map((({id:t,title:e,year:a,genres:n,rating:o,imgPath:i})=>`<div class="filmoteka__item" data-id="${t}">\n            <div class="filmoteka__item-wrapper">\n                <img class="filmoteka-img" src="${i}" alt="">\n                <div class="overlay-text">\n                    <h2 class="subtitle">${e}</h2>\n                    <p class="discription">${n}<span class="filmoteka__year"> ${a}</span> </p>\n                    <div class="filmoteka__rating">${o}</div>\n                </div>\n            </div>\n    </div>`));p.mainContainer.insertAdjacentHTML("beforeend",a.join("")),p.mainContainer.addEventListener("click",r)}();
//# sourceMappingURL=index.43628d1a.js.map

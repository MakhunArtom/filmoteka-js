var e={save:(e,t)=>{try{const a=JSON.stringify(t);localStorage.setItem(e,a)}catch(t){console.error(`Error during saving ${e} to local strage; `,t.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(t){console.error(`Error during getting ${e} from localStorage: `,t.message)}},del:e=>{try{localStorage.removeItem(e)}catch(t){console.error(`Error during deleting ${e}! from localStorage: `,t.message)}}};async function t(e){return await(await fetch(i+`3/trending/movie/day?api_key=${e}`)).json()}async function a(t){const a=await(await fetch(i+`3/genre/movie/list?api_key=${t}&language=en-US`)).json();return e.save("genresList",a.genres),console.log("Genres were updated, and saved to localStorage for future"),a.genres}async function n(t){e.load("genresList")||await a(o);const n=e.load("genresList");let r=new Array;return t.forEach((e=>{try{r.push(n.find((t=>t.id===e)).name)}catch(t){console.log(`${e} wasn't found in Local Storage, updating ganresList`),n=await(0,a)(o),r.push(n.find((t=>t.id===e)).name)}})),r.join()}async function r(e){const a=await t(e),r=(a.total_pages,a.results),o=await Promise.all(r.map((async({id:e,title:t,original_title:a,name:r,original_name:o,overview:i,poster_path:s,genre_ids:l,popularity:c,release_date:g,first_air_date:d,vote_average:m,vote_count:u})=>{const p=t||r,f=a||o,v=g||d,y=s?"https://image.tmdb.org/t/p/w300"+s:"",_=l?await n(l):null,h=m||null;return await{id:e,title:p,originalTitle:f,year:v.slice(0,4),genres:_,popularity:c,overview:i,rating:h,voteCount:u,imgPath:y}})));return console.log(o),o}const o="565e4989d784811de7dff7d665000157",i="https://api.themoviedb.org/",s={mainContainer:document.querySelector(".filmoteka__container")};!async function(){const t=await r(o);e.save("currentPage",t),console.log(t);const a=t.map((({id:e,title:t,year:a,genres:n,popularity:r,imgPath:o})=>`<div class="filmoteka__item" data-id="${e}">\n        <a class="filmoteka__item-link" href="./">\n            <div class="filmoteka__item-wrapper">\n                <img class="filmoteka-img" src="${o}" alt="" width="395px">\n                <div class="overlay-text">\n                    <h2 class="subtitle">${t}</h2>\n                    <p class="discription">${n} | ${a}</p>\n                </div>\n            </div>\n        </a>\n    </div>`));s.mainContainer.insertAdjacentHTML("beforeend",a.join(""))}();
//# sourceMappingURL=index.49e0e794.js.map

var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired76b;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired76b=n);var i=n("7GRT7");function s(e){const t=document.querySelector(".filmoteka__container"),a=e.map((({id:e,title:t,year:a,genres:n,rating:i,imgPath:s})=>{if(n){let e=(n.match(/\,/g)||[]).length;for(;e>1;)e=((n=n.slice(0,n.lastIndexOf(","))+"npm ...").match(/\,/g)||[]).length}let r=`\n         <div class="filmoteka__item" data-id="${e}">\n              <div class="filmoteka__item-wrapper">\n                  <img class="filmoteka-img" src="${s}" alt="">\n                  <div class="overlay-text">\n                      <h2 class="subtitle">${t}</h2>\n                      <p class="discription">`;return n&&(r+=`${n} `,a&&(r+="|")),a&&(r+=`<span class="filmoteka__year"> ${a}</span>`),r+=` </p>\n                      <div class="filmoteka__rating">${i}</div>\n                  </div>\n              </div>\n      </div>`,r}));t.innerHTML="",t.insertAdjacentHTML("beforeend",a.join(""))}n("7GRT7");const r=new(0,n("5SzY7").default);let o,l="",c="";async function g(e){const t=await $(e);return o=t.total_pages,t.results}function p(e,t,a,n,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${a}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${n}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function d(e,t,a,n,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>${e}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${a}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${n}</a>\n<a class='pagination__page' id="lastPag" href=''>${i}</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}const u=document.querySelector("#pagination");function f(e){const t=document.querySelector("#firstPage"),a=document.querySelector("#lastPag"),n={peg2:w,peg3:w,peg4:w,peg5:w,peg6:w};(w===o||w>=o-4)&&h(n),Number(a.textContent)===w&&v(n),Number(t.textContent)===w&&m(n),(1===w||w<=5)&&y()}function _(e){const t=document.querySelector("#firstPage"),a=document.querySelector("#lastPag"),n={peg2:w,peg3:w,peg4:w,peg5:w,peg6:w};w>=o-5&&h(n),w>Number(a.textContent)&&v(n),w<=2&&y(),w<Number(t.textContent)&&m(n)}function h(e){if(w>o)return;let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;u.innerHTML="",s=o-1,i=o-2,n=o-3,a=o-4,t=o-5,u.innerHTML=d(t,a,n,i,s)}function m(e){if(w<=2)return;u.innerHTML="";let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;i-=1,n-=2,a-=3,t-=4,u.innerHTML=p(t,a,n,i,s)}function v(e){if(w>=o-1)return;u.innerHTML="";let{peg2:t,peg3:a,peg4:n,peg5:i,peg6:s}=e;a+=1,n+=2,i+=3,s+=4,u.innerHTML=p(t,a,n,i,s)}function y(){o<7||(u.innerHTML="",u.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n<a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<a class='pagination__page' id="firstPage" href=''>2</a>\n<a class='pagination__page' id="thirdPage" href=''>3</a>\n<a class='pagination__page' id="fourthPage" href=''>4</a>\n<a class='pagination__page' id="fifthPage" href=''>5</a>\n<a class='pagination__page' id="lastPag" href=''>6</a>\n<span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<a class='pagination__page' id="preLastPag" href=''>${o}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`)}async function P(e){e.preventDefault();const t=await async function(){return(await async function(e){return await(await fetch(F+`3/search/movie?api_key=${e}&language=en-US&query=${l}&page=${w}`)).json()}(O)).results}(),a=await M(t);a.length>0&&s(a)}function b(){const e={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};e.firstPage.textContent>2&&e.ellipsisStart.classList.remove("visually-hidden"),e.lastPage.textContent>=o-1?e.ellipsisEnd.classList.add("visually-hidden"):e.ellipsisEnd.classList.remove("visually-hidden")}function L(){const e={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};w>1&&e.leftBtn.removeAttribute("disabled"),w!==o?e.rightBtn.removeAttribute("disabled"):e.rightBtn.setAttribute("disabled","disabled")}function S(e){const t={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};t.activ&&t.activ.classList.remove("pagination__page--activ"),w==t.firstPage.textContent&&t.firstPage.classList.add("pagination__page--activ"),w==t.thirdPage.textContent&&t.thirdPage.classList.add("pagination__page--activ"),w==t.fourthPage.textContent&&t.fourthPage.classList.add("pagination__page--activ"),w==t.fifthPage.textContent&&t.fifthPage.classList.add("pagination__page--activ"),w==t.lastPag.textContent&&t.lastPag.classList.add("pagination__page--activ"),w==t.preFirstPage.textContent&&t.preFirstPage.classList.add("pagination__page--activ"),w==t.preLastPag.textContent&&t.preLastPag.classList.add("pagination__page--activ")}let w=1;const q={pagination:document.querySelector("#pagination"),mainContainer:document.querySelector(".filmoteka__container")};async function $(e){return await(await fetch(F+`3/trending/movie/day?api_key=${e}&page=${w}`)).json()}async function T(e){const t=await(await fetch(F+`3/genre/movie/list?api_key=${e}&language=en-US`)).json();return i.default.save("genresList",t.genres),console.log("Genres were updated, and saved to localStorage for future"),t.genres}async function x(e,t){return await(await fetch(F+`3/search/movie?api_key=${e}&language=en-US&query=${t}`)).json()}q.pagination.addEventListener("click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;w=Number(e.target.textContent),q.mainContainer.innerHTML="",console.log(""===l),""===l?R():P(e);f(),b(),S(),L()})),q.pagination.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};e.target===t.rightBtn&&(w+=1);e.target===t.leftBtn&&(w-=1);q.mainContainer.innerHTML="",""===l?R():P(e);_(),b(),S(),L()}));i=n("7GRT7");async function C(e){i.default.load("genresList")||await T(O);let t=i.default.load("genresList"),a=new Array;return e.forEach((async e=>{try{a.push(t.find((t=>t.id===e)).name)}catch(n){console.log(`${e} wasn't found in Local Storage, updating ganresList`),t=await T(O),a.push(t.find((t=>t.id===e)).name)}})),a.join(", ")}i=n("7GRT7");async function M(e){const t=await Promise.all(e.map((async({id:e,title:t,original_title:a,name:n,original_name:i,overview:s,poster_path:r,genre_ids:o,popularity:l,release_date:c,first_air_date:g,vote_average:p,vote_count:d})=>{const u=t||n,f=a||i,_=c||g,h=r?"https://image.tmdb.org/t/p/w300"+r:"",m=o.length>1&&await C(o),v=p?p.toFixed(1):0;return await{id:e,title:u,originalTitle:f,year:_?_.slice(0,4):void 0,genres:m,popularity:l,overview:s,rating:v,voteCount:d,imgPath:h}})));return i.default.save("currentPage",t),t}var k=n("34clH"),E=n("eTE0Z"),H=n("jWOqs");const B=new(0,n("5SzY7").default),O="565e4989d784811de7dff7d665000157",F="https://api.themoviedb.org/",N={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search")};async function R(){const e=await g(O);s(await M(e)),B.spinOff(),(0,H.default)()}N.mainContainer.addEventListener("click",E.openModal),N.openModalBtn.addEventListener("click",k.openModalFooter),N.form.addEventListener("submit",(async function(e){if(e.preventDefault(),r.spinOn(),c=e.target.search.value,N.searchResultText.classList.add("visually-hidden"),!c)return R(),y(),l="",void r.spinOff();const t=await async function(){const e=await x(O,c);return o=e.total_pages,e.results}(),a=await M(t);if(t.length>0&&(l=e.target.search.value),a.length>0)return s(a),y(),void r.spinOff();N.searchResultText.classList.remove("visually-hidden"),r.spinOff()})),B.spinOn(),R(),setTimeout(y,500);
//# sourceMappingURL=index.a56710a7.js.map

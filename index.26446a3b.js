!function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},e={},a=n.parcelRequired76b;null==a&&((a=function(n){if(n in t)return t[n].exports;if(n in e){var a=e[n];delete e[n];var i={id:n,exports:{}};return t[n]=i,a.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(n,t){e[n]=t},n.parcelRequired76b=a);var i=a("cJBkb"),s=a("jGe89");const l="565e4989d784811de7dff7d665000157",o={mainContainer:document.querySelector(".filmoteka__container"),openModalBtn:document.querySelector(".modal-footer-open"),searchResultText:document.querySelector(".form-text"),form:document.querySelector(".header_search"),enLangBTN:document.getElementById("e-lang-en"),uaLangBTN:document.getElementById("e-lang-ua")};var r=a("gQxnC");function g(n,t,e,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<ul class="pagination__list">\n <li class='pagination__item'>\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n </li>\n <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n  <li class='pagination__item'>\n  <a class='pagination__page' id="firstPage" href=''>${n}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fourthPage' href=''>${e}</a>\n </li>\n <li class='pagination__item'>\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n </li>\n <li class='pagination__item' id="preLastItem">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n </li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n <li class='pagination__item' id="lastItem">\n  <a class='pagination__page' id="preLastPag" href=''>${U}</a>\n </li>\n</ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}function c(n,t,e,a,i){return`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page' id="preFirstPage" href=''>1</a>\n</li>\n  <span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>${n}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='thirdPage' href=''>${t}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fourthPage' href=''>${e}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id ='fifthPage' href=''>${a}</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>${i}</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page  pagination__page--activ' id="preLastPag" href=''>${U}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`}var p=a("lpZvY");const u=document.querySelector("#pagination");function d(n){const t=document.querySelector("#firstPage"),e=document.querySelector("#lastPag"),a={peg2:H,peg3:H,peg4:H,peg5:H,peg6:H};Number(e.textContent)===H&&h(a),(H===U||H>=U-4)&&_(a),Number(t.textContent)===H&&m(a),(1===H||H<=5)&&v()}function f(n){const t=document.querySelector("#firstPage"),e=document.querySelector("#lastPag"),a={peg2:H,peg3:H,peg4:H,peg5:H,peg6:H};H>=U-5&&_(a),H>Number(e.textContent)&&h(a),H<=5&&v(),H<Number(t.textContent)&&m(a)}function _(n){if(H>U)return;let{peg2:t,peg3:e,peg4:a,peg5:i,peg6:s}=n;u.innerHTML="",s=U-1,i=U-2,a=U-3,e=U-4,t=U-5,u.innerHTML=c(t,e,a,i,s)}function m(n){if(H<=2)return;u.innerHTML="";let{peg2:t,peg3:e,peg4:a,peg5:i,peg6:s}=n;i-=1,a-=2,e-=3,t-=4,u.innerHTML=g(t,e,a,i,s)}function h(n){if(H>=U-1)return;u.innerHTML="";let{peg2:t,peg3:e,peg4:a,peg5:i,peg6:s}=n;e+=1,a+=2,i+=3,s+=4,u.innerHTML=g(t,e,a,i,s)}function v(){if(U<7)return;u.innerHTML="",u.innerHTML=`<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n\n<ul class="pagination__list">\n<li class="pagination__item">\n  <a class='pagination__page pagination__page--activ' id="preFirstPage" href=''>1</a>\n</li>\n<span class='pagination__ellipsis visually-hidden' id="ellipsisStart">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="firstPage" href=''>2</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="thirdPage" href=''>3</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fourthPage" href=''>4</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="fifthPage" href=''>5</a>\n</li>\n<li class="pagination__item">\n  <a class='pagination__page' id="lastPag" href=''>6</a>\n</li>\n  <span class='pagination__ellipsis' id="ellipsisEnd">...</span>\n<li class="pagination__item">\n  <a class='pagination__page' id="preLastPag" href=''>${U}</a>\n</li>\n\n</ul>\n\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`;const n=document.querySelector(".is-none");n&&n.classList.remove("is-none"),(0,p.controlColor)()}function y(){u.innerHTML="",u.innerHTML="<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n  <ul class=\"pagination__list\">\n  <li class='pagination__item'>\n  <a class=\"pagination__page pagination__page--activ \" id=\"preFirstPage\" href=''>1</a>\n  </li>\n  </ul>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>";const n=[,,'id="firstPage"',"id ='thirdPage'","id ='fourthPage'","id ='fifthPage'",'id="lastPag"','id="preLastPag"'],t=document.querySelector(".pagination__list");let e="";for(let t=2;t<U+1;t+=1)e+=`<li class='pagination__item'><a class="pagination__page"  href='' ${n[t]}>${t}</a></li>`;t.insertAdjacentHTML("beforeend",e)}r=a("gQxnC");async function b(n){r.default.load("genresList")||await I(l);let t=r.default.load("genresList"),e=new Array;return n.forEach((async n=>{try{e.push(t.find((t=>t.id===n)).name)}catch(a){console.log(`${n} wasn't found in Local Storage, updating ganresList`),t=await I(l),e.push(t.find((t=>t.id===n)).name)}})),e.join(", ")}r=a("gQxnC");async function P(n){const t=await Promise.all(n.map((async({id:n,title:t,original_title:e,name:a,original_name:i,overview:s,poster_path:l,genre_ids:o,popularity:r,release_date:g,first_air_date:c,vote_average:p,vote_count:u})=>{const d=t||a,f=e||i,_=g||c,m=l?"https://image.tmdb.org/t/p/w300"+l:"",h=o.length>1&&await b(o),v=p?p.toFixed(1):0;return await{id:n,title:d,originalTitle:f,year:_?_.slice(0,4):void 0,genres:h,popularity:r,overview:s,rating:v,voteCount:u,imgPath:m}})));return r.default.save("currentPage",t),t}var L=a("gzo5i"),S=a("4FHbW");const w=new(0,(B=a("hBZCD")).default);async function q(n){n.preventDefault();const t=await async function(){return(await async function(n){return await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${n}&language=en-US&query=${Y}&page=${H}`)).json()}(l)).results}(),e=await P(t);if(e.length)return(0,L.renderItems)(e),w.spinOff(),void(0,S.default)()}async function C(){const n=await G(l),t=await P(n);(0,L.renderItems)(t),w.spinOff(),(0,S.default)()}function $(){const n={firstPage:document.querySelector("#firstPage"),lastPage:document.querySelector("#lastPag"),ellipsisStart:document.querySelector("#ellipsisStart"),ellipsisEnd:document.querySelector("#ellipsisEnd")};n.firstPage.textContent>2&&n.ellipsisStart.classList.remove("visually-hidden"),n.lastPage.textContent>=U-1?n.ellipsisEnd.classList.add("visually-hidden"):n.ellipsisEnd.classList.remove("visually-hidden")}function x(){const n={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};H>1&&n.leftBtn.removeAttribute("disabled"),H!==U?n.rightBtn.removeAttribute("disabled"):n.rightBtn.setAttribute("disabled","disabled")}function T(n){const t={activ:document.querySelector(".pagination__page--activ"),pagination:document.querySelector("#pagination"),firstPage:document.querySelector("#firstPage"),thirdPage:document.querySelector("#thirdPage"),fourthPage:document.querySelector("#fourthPage"),fifthPage:document.querySelector("#fifthPage"),lastPag:document.querySelector("#lastPag"),preFirstPage:document.querySelector("#preFirstPage"),preLastPag:document.querySelector("#preLastPag")};t.activ&&t.activ.classList.remove("pagination__page--activ"),t.firstPage&&H==t.firstPage.textContent&&t.firstPage.classList.add("pagination__page--activ"),t.thirdPage&&H==t.thirdPage.textContent&&t.thirdPage.classList.add("pagination__page--activ"),t.fourthPage&&H==t.fourthPage.textContent&&t.fourthPage.classList.add("pagination__page--activ"),t.fifthPage&&H==t.fifthPage.textContent&&t.fifthPage.classList.add("pagination__page--activ"),t.lastPag&&H==t.lastPag.textContent&&t.lastPag.classList.add("pagination__page--activ"),t.preFirstPage&&H==t.preFirstPage.textContent&&t.preFirstPage.classList.add("pagination__page--activ"),t.preLastPag&&H==t.preLastPag.textContent&&t.preLastPag.classList.add("pagination__page--activ")}var B=a("hBZCD"),M=a("5S7aa");M=a("5S7aa");const k=new(0,B.default);let H=1;const E={form:document.querySelector(".header_search"),pagination:document.querySelector("#pagination"),paginationLib:document.querySelector("#pagination")};function O(n,t,e){n&&n.addEventListener(t,e)}function F(n,t,e){n&&n.removeEventListener(t,e)}F(E.paginationLib,"click",M.onlibraryLink),F(E.paginationLib,"click",M.onlibraryBtn),O(E.pagination,"click",(function(n){if(n.preventDefault(),"A"!==n.target.nodeName)return;H=Number(n.target.textContent),Y?(k.spinOn(),q(n)):(k.spinOn(),C());U>1&&U<8?y():1!==U&&(d(),$());T(),x(),k.spinOff()})),O(E.pagination,"click",(function(n){if(n.preventDefault(),"BUTTON"!==n.target.nodeName)return;const t={leftBtn:document.querySelector(".btn-left"),rightBtn:document.querySelector(".btn-right")};n.target===t.rightBtn&&(H+=1);n.target===t.leftBtn&&(H-=1);Y?(k.spinOn(),q(n)):(k.spinOn(),C());U>1&&U<8?y():1!==U&&(f(),$());T(),x(),k.spinOff()})),O(E.form,"submit",(n=>H=1));let j="ua";async function N(n){let t=localStorage.getItem("lang");return j="ua"===t?"uk":"en",await(await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${n}&language=${j}&page=${H}`)).json()}async function I(n,t){const e=await(await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${n}&language=${t}`)).json();return r.default.save("genresList",e.genres),console.log("Genres were updated, and saved to localStorage for future"),e.genres}async function D(n,t,e){e="en"===localStorage.getItem("lang")?"en":"uk";return await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${n}&language=e${e}&query=${t}`)).json()}L=a("gzo5i"),L=a("gzo5i");const A=new(0,(B=a("hBZCD")).default);async function Z(){A.spinOn();const n=await G(l),t=await P(n);A.spinOff(),(0,L.renderItems)(t),v()}a("gQxnC");const Q=new(0,(B=a("hBZCD")).default),R=document.querySelector("#pagination");let U,Y,z="";async function G(n){const t=await N(n);return t.total_pages>0&&(U=t.total_pages),t.results}S=a("4FHbW");var W=a("jS5ak"),J=(p=a("lpZvY"),a("6tjHf"));r=a("gQxnC");let K=(0,J.langCurrent)();function V(){const n=document.querySelector(".js-filter-years");n.innerHTML="";let t=(0,J.langCurrent)(),e="All Years";"ua"==(0,J.langCurrent)()&&(e="Усі роки",t="uk");let a=(new Date).getFullYear();n.innerHTML=(()=>{let n=`<option class="js-filter-year" value="" selected>${e}</option>`;for(let t=a;t>=1907;t-=1)n+=`<option value="${t}">${t}</option>`;return n})()}async function X(){const n=document.querySelector(".js-filter-genres");n.innerHTML="";let t=(0,J.langCurrent)(),e="All Genres",a=[];"ua"==(0,J.langCurrent)()&&(e="Усі жанри",t="uk"),K===(0,J.langCurrent)()&&r.default.load("genresList")?a=r.default.load("genresList"):(a=await I(l,t),K=(0,J.langCurrent)());let i=`<option class="js-filter-genres--default" value="" selected>${e}</option>`;i+=a.map((n=>`<option value="${n.id}">${n.name}</option>`)).join(""),n.innerHTML=i}a("gyZtm");J=a("6tjHf");function nn(n){(0,J.setIndexLang)(n),X(),V(),Z()}X(),V(),o.mainContainer.addEventListener("click",s.openModal),o.openModalBtn.addEventListener("click",i.openModalFooter),o.form.addEventListener("submit",(async function(n){if(n.preventDefault(),Q.spinOn(),z=n.target.search.value,o.searchResultText.classList.add("visually-hidden"),!z)return Z(),Y="",void Q.spinOff();const t=await async function(){const n=await D(l,z);n.total_pages>0&&(U=n.total_pages);return n.results}(),e=await P(t);if(t.length&&(Y=n.target.search.value),e.length)return(0,L.renderItems)(e),R.innerHTML="",U>1&&U<8?y():1!==U&&v(),void Q.spinOff();o.searchResultText.classList.remove("visually-hidden"),Q.spinOff()})),o.enLangBTN.addEventListener("click",(()=>nn("en"))),o.uaLangBTN.addEventListener("click",(()=>nn("ua")));const tn=(0,J.langCurrent)();Z(),(0,J.setIndexLang)(tn),(0,S.default)(),(0,W.default)(),(0,p.controlColor)(),(0,p.controlColorFilter)()}();
//# sourceMappingURL=index.26446a3b.js.map

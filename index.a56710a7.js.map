{"mappings":"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","sources":["src/js/common/renderItems.js","src/js/index-page/search.js","src/js/pagination-js/pagination-markup.js","src/js/pagination-js/counter-pagination.js","src/js/pagination-js/featch-pagination.js","src/js/pagination-js/plagin-pagination.js","src/js/pagination-js/main-pagination.js","src/js/index-page/themoviedbAPI.js","src/js/data-processing/decodeGenres.js","src/js/data-processing/processCurrentPage.js","src/js/index-page/index.js"],"sourcesContent":["export function renderItems(currentPageContent) {\n  const mainContainer = document.querySelector('.filmoteka__container')\n  const itemMarkup = currentPageContent.map(\n    ({ id, title, year, genres, rating, imgPath }) => {\n      if (genres) {\n        let countOfComma = (genres.match(/\\,/g) || []).length;\n        while (countOfComma > 1) {\n          genres = genres.slice(0, genres.lastIndexOf(',')) + 'npm ...';\n          countOfComma = (genres.match(/\\,/g) || []).length;\n        }\n      }\n      let itemString = `\n         <div class=\"filmoteka__item\" data-id=\"${id}\">\n              <div class=\"filmoteka__item-wrapper\">\n                  <img class=\"filmoteka-img\" src=\"${imgPath}\" alt=\"\">\n                  <div class=\"overlay-text\">\n                      <h2 class=\"subtitle\">${title}</h2>\n                      <p class=\"discription\">`;\n      if (genres) {\n        itemString += `${genres} `;\n        if (year) {\n          itemString += `|`;\n        }\n      }\n      if (year) {\n        itemString += `<span class=\"filmoteka__year\"> ${year}</span>`;\n      }\n      itemString += ` </p>\n                      <div class=\"filmoteka__rating\">${rating}</div>\n                  </div>\n              </div>\n      </div>`;\n      return itemString;\n    }\n  );\n  mainContainer.innerHTML = '';\n  mainContainer.insertAdjacentHTML('beforeend', itemMarkup.join(''));\n}\n","import { fetchSearch } from './themoviedbAPI';\nimport { processCurrentPage } from '../data-processing/processCurrentPage';\nimport { APIKEY } from '.';\nimport { refs } from '.';\nimport { startPage } from '../pagination-js/counter-pagination';\nimport { renderItems } from '../common/renderItems';\nimport { renderPopularMovies } from '.';\nimport localStrg from '../localStorage/localStrg';\nimport { fetchPopular } from './themoviedbAPI';\nimport { decodeGenres } from '../data-processing/decodeGenres';\nimport { APIKEY } from './index';\nimport Spinner from '../common/spinner';\n\nconst spin = new Spinner();\n\n\nexport let pageCount;\nexport let searchQueryPagination = '';\n\nlet searchQuery = '';\n\nexport async function searchMovies(event) {\n  event.preventDefault();\n  spin.spinOn();\n  searchQuery = event.target.search.value;\n  refs.searchResultText.classList.add('visually-hidden');\n\n  if (!searchQuery) {\n    renderPopularMovies();\n\n    startPage();\n    searchQueryPagination = '';\n    spin.spinOff();\n    return\n\n  }\n\n  const searchResult = await getSearchMovies();\n  const currentPageContent = await processCurrentPage(searchResult);\n\n  if (searchResult.length > 0) {\n    searchQueryPagination = event.target.search.value;\n  }\n\n  if (currentPageContent.length > 0) {\n    renderItems(currentPageContent);\n    startPage();\n    spin.spinOff();\n    return;\n  }\n  refs.searchResultText.classList.remove('visually-hidden');\n  spin.spinOff();\n}\n\nexport async function getSearchMovies() {\n  const popularMovies = await fetchSearch(APIKEY, searchQuery);\n  pageCount = popularMovies.total_pages;\n  return popularMovies.results;\n}\n\nexport async function getPopularMovies(APIKEY) {\n  const popularMovies = await fetchPopular(APIKEY);\n  pageCount = popularMovies.total_pages;\n  return popularMovies.results;\n}\n","import { pageCount } from '../index-page/search';\n\nexport function pagMarkup(peg2, peg3, peg4, peg5, peg6) {\n  return `<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id=\"preFirstPage\" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id=\"ellipsisStart\">...</span>\n<a class='pagination__page' id=\"firstPage\" href=''>${peg2}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${peg3}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${peg4}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${peg5}</a>\n<a class='pagination__page' id=\"lastPag\" href=''>${peg6}</a>\n<span class='pagination__ellipsis' id=\"ellipsisEnd\">...</span>\n<a class='pagination__page' id=\"preLastPag\" href=''>${pageCount}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`;\n}\n\nexport function markupLastPag(peg2, peg3, peg4, peg5, peg6) {\n  return `<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button'>\n   <\n  </button>\n</div>\n<a class='pagination__page' id=\"preFirstPage\" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id=\"ellipsisStart\">...</span>\n<a class='pagination__page' id=\"firstPage\" href=''>${peg2}</a>\n<a class='pagination__page' id ='thirdPage' href=''>${peg3}</a>\n<a class='pagination__page' id ='fourthPage' href=''>${peg4}</a>\n<a class='pagination__page' id ='fifthPage' href=''>${peg5}</a>\n<a class='pagination__page' id=\"lastPag\" href=''>${peg6}</a>\n<span class='pagination__ellipsis' id=\"ellipsisEnd\">...</span>\n<a class='pagination__page  pagination__page--activ' id=\"preLastPag\" href=''>${pageCount}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n    >\n  </button>\n</div>`;\n}\n\nexport function markupStartPag() {\n  return `<div class='pagination-decrement'>\n  <button class='btn-left btn' type='button' disabled>\n  <\n  </button>\n</div>\n<a class='pagination__page pagination__page--activ' id=\"preFirstPage\" href=''>1</a>\n<span class='pagination__ellipsis visually-hidden' id=\"ellipsisStart\">...</span>\n<a class='pagination__page' id=\"firstPage\" href=''>2</a>\n<a class='pagination__page' id=\"thirdPage\" href=''>3</a>\n<a class='pagination__page' id=\"fourthPage\" href=''>4</a>\n<a class='pagination__page' id=\"fifthPage\" href=''>5</a>\n<a class='pagination__page' id=\"lastPag\" href=''>6</a>\n<span class='pagination__ellipsis' id=\"ellipsisEnd\">...</span>\n<a class='pagination__page' id=\"preLastPag\" href=''>${pageCount}</a>\n<div class='pagination-increment'>\n  <button class='btn-right btn' type='button'>\n  >\n  </button>\n\n</div>`;\n}\n","import { pageCount } from '../index-page/search';\n// import { pageCount } from '../index-page/search';\n\nimport { PAGE } from './main-pagination';\n\nimport { pagMarkup } from './pagination-markup';\nimport { markupLastPag } from './pagination-markup';\nimport { markupStartPag } from './pagination-markup';\n\nconst div = document.querySelector('#pagination');\n\n////////////////////////////// СЧЕТЧИК ПАГИНАЦИИ ////////////////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////// ОТРИСОВКА ПАГИНАЦИИ  ПО СЫЛКЕ\nexport function renderMarkupOnClickLink(e) {\n  const firstPage = document.querySelector('#firstPage');\n  const lastPage = document.querySelector('#lastPag');\n\n  const pages = {\n    peg2: PAGE,\n    peg3: PAGE,\n    peg4: PAGE,\n    peg5: PAGE,\n    peg6: PAGE,\n  };\n\n  // Последняя страница\n  if (PAGE === pageCount || PAGE >= pageCount - 4) {\n    lastPages(pages);\n  }\n\n  // Увиличение счетчика\n  if (Number(lastPage.textContent) === PAGE) {\n    incriment(pages);\n  }\n\n  // Уменьшение счетчика\n  if (Number(firstPage.textContent) === PAGE) {\n    dicremrnt(pages);\n  }\n\n  // Отрисовка начальных страниц от 1-6\n  if (PAGE === 1 || PAGE <= 5) {\n    startPage(e);\n  }\n}\n\n//////////////////// ОТРИСОВКА ПАГИНАЦИИ  ПО КНОПКЕ\n\nexport function renderPaginationONClickBtn(e) {\n  const firstPage = document.querySelector('#firstPage');\n  const lastPage = document.querySelector('#lastPag');\n\n  const pages = {\n    peg2: PAGE,\n    peg3: PAGE,\n    peg4: PAGE,\n    peg5: PAGE,\n    peg6: PAGE,\n  };\n\n  // // Последняя страница\n  if (PAGE >= pageCount - 5) {\n    lastPages(pages);\n  }\n\n  // увиличеник счетчика\n  if (PAGE > Number(lastPage.textContent)) {\n    incriment(pages);\n  }\n\n  // Отрисовка начальных страниц от 1-6\n  if (PAGE <= 2) {\n    startPage();\n  }\n\n  // // Уменьшение счетчика\n  if (PAGE < Number(firstPage.textContent)) {\n    dicremrnt(pages);\n  }\n}\n\n//////////////////////////////// ОТРИСОВКА ПОСЛЕДНЕЙ СТРАНИЦИ\nfunction lastPages(pages) {\n  if (PAGE > pageCount) {\n    return;\n  }\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  div.innerHTML = '';\n\n  peg6 = pageCount - 1;\n  peg5 = pageCount - 2;\n  peg4 = pageCount - 3;\n  peg3 = pageCount - 4;\n  peg2 = pageCount - 5;\n\n  div.innerHTML = markupLastPag(peg2, peg3, peg4, peg5, peg6);\n}\n\n//////////////////////////////////// УМЕНЬШЕНИЕ СЧЕТЧИКА\nfunction dicremrnt(pages) {\n  if (PAGE <= 2) {\n    return;\n  }\n\n  div.innerHTML = '';\n\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  peg5 -= 1;\n  peg4 -= 2;\n  peg3 -= 3;\n  peg2 -= 4;\n\n  div.innerHTML = pagMarkup(peg2, peg3, peg4, peg5, peg6);\n}\n\n////////////////////////////////// // УВИЛИЧЕНИЕ СЧЕТЧИКА\n\nfunction incriment(pages) {\n  if (PAGE >= pageCount - 1) {\n    return;\n  }\n\n  div.innerHTML = '';\n\n  let { peg2, peg3, peg4, peg5, peg6 } = pages;\n\n  peg3 += 1;\n  peg4 += 2;\n  peg5 += 3;\n  peg6 += 4;\n\n  div.innerHTML = pagMarkup(peg2, peg3, peg4, peg5, peg6);\n}\n\n// //////////////////// РАЗМЕТКА ПАГИНАЦИИ ПРИ ПЕРВОМ ЗАПУСКЕ СТРАНИЦЫ (НАЧАЛЬНАЯ СТРАНИЦА)\n\nexport function startPage() {\n  if (pageCount < 7) {\n    return;\n  }\n  div.innerHTML = '';\n\n  div.innerHTML = markupStartPag();\n}\n","import { processCurrentPage } from '../data-processing/processCurrentPage';\nimport { APIKEY } from '../index-page/index';\nimport { APIURL } from '../index-page/index';\nimport { renderItems } from '../common/renderItems';\nimport { PAGE } from './main-pagination';\nimport { searchQueryPagination } from '../index-page/search';\n\nexport async function searchMoviesPagination(event) {\n  event.preventDefault();\n  // console.log(searchQueryPagination);\n  const searchResult = await getSearchMoviesPagination();\n  // console.log(searchResult);\n  const currentPageContent = await processCurrentPage(searchResult);\n\n  if (currentPageContent.length > 0) {\n    renderItems(currentPageContent);\n    return;\n  }\n}\n\nasync function getSearchMoviesPagination() {\n  const popularMovies = await fetchSearchPagination(APIKEY);\n  return popularMovies.results;\n}\n\nasync function fetchSearchPagination(token) {\n  const response = await (\n    await fetch(\n      APIURL +\n        `3/search/movie?api_key=${token}&language=en-US&query=${searchQueryPagination}&page=${PAGE}`\n    )\n  ).json();\n  return response;\n}\n","import { PAGE } from './main-pagination';\nimport { pageCount } from '../index-page/search';\n\n//////////////////////////// УБИРАЮ ИЛИ СТАВЛЮ  \"...\"\n\nexport function ellipsis() {\n  const refs = {\n    firstPage: document.querySelector('#firstPage'),\n    lastPage: document.querySelector('#lastPag'),\n    ellipsisStart: document.querySelector('#ellipsisStart'),\n    ellipsisEnd: document.querySelector('#ellipsisEnd'),\n  };\n\n  if (refs.firstPage.textContent > 2) {\n    refs.ellipsisStart.classList.remove('visually-hidden');\n  }\n\n  if (refs.lastPage.textContent >= pageCount - 1) {\n    refs.ellipsisEnd.classList.add('visually-hidden');\n    return;\n  }\n  refs.ellipsisEnd.classList.remove('visually-hidden');\n}\n\n//................. ДЕЛФЮ КНОПКУ НЕ АКТИВНОЙ\nexport function disaibledBtn() {\n  const refs = {\n    leftBtn: document.querySelector('.btn-left'),\n    rightBtn: document.querySelector('.btn-right'),\n  };\n\n  if (PAGE > 1) {\n    refs.leftBtn.removeAttribute('disabled');\n  }\n\n  if (PAGE === pageCount) {\n    refs.rightBtn.setAttribute('disabled', 'disabled');\n    return;\n  }\n\n  refs.rightBtn.removeAttribute('disabled');\n}\n\n// //................ АКТИВНАЯ СТРАНИЦА\n\nexport function curentPage(e) {\n  const refs = {\n    activ: document.querySelector('.pagination__page--activ'),\n    pagination: document.querySelector('#pagination'),\n    firstPage: document.querySelector('#firstPage'),\n    thirdPage: document.querySelector('#thirdPage'),\n    fourthPage: document.querySelector('#fourthPage'),\n    fifthPage: document.querySelector('#fifthPage'),\n    lastPag: document.querySelector('#lastPag'),\n    preFirstPage: document.querySelector('#preFirstPage'),\n    preLastPag: document.querySelector('#preLastPag'),\n  };\n\n  if (refs.activ) {\n    refs.activ.classList.remove('pagination__page--activ');\n  }\n\n  if (PAGE == refs.firstPage.textContent) {\n    refs.firstPage.classList.add('pagination__page--activ');\n  }\n  if (PAGE == refs.thirdPage.textContent) {\n    refs.thirdPage.classList.add('pagination__page--activ');\n  }\n  if (PAGE == refs.fourthPage.textContent) {\n    refs.fourthPage.classList.add('pagination__page--activ');\n  }\n  if (PAGE == refs.fifthPage.textContent) {\n    refs.fifthPage.classList.add('pagination__page--activ');\n  }\n\n  if (PAGE == refs.lastPag.textContent) {\n    refs.lastPag.classList.add('pagination__page--activ');\n  }\n\n  if (PAGE == refs.preFirstPage.textContent) {\n    refs.preFirstPage.classList.add('pagination__page--activ');\n  }\n\n  if (PAGE == refs.preLastPag.textContent) {\n    refs.preLastPag.classList.add('pagination__page--activ');\n  }\n}\n","import { renderMarkupOnClickLink } from './counter-pagination';\nimport { renderPaginationONClickBtn } from './counter-pagination';\n\nimport { renderPopularMovies } from '../index-page/index';\nimport { searchMoviesPagination } from './featch-pagination';\n\nimport { searchQueryPagination } from '../index-page/search';\n\nimport { ellipsis } from './plagin-pagination';\nimport { curentPage } from './plagin-pagination';\nimport { disaibledBtn } from './plagin-pagination';\n\nexport let PAGE = 1;\n\nconst refs = {\n  pagination: document.querySelector('#pagination'),\n  mainContainer: document.querySelector('.filmoteka__container'),\n};\nrefs.pagination.addEventListener('click', onClickPaginationLink);\nrefs.pagination.addEventListener('click', onClickButtonPagination);\n\n// ////////////////////// НАВИГАЦИЯ ПО СЫЛКЕ\n\nfunction onClickPaginationLink(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n  PAGE = Number(e.target.textContent);\n\n  refs.mainContainer.innerHTML = '';\n\n  console.log(searchQueryPagination === '');\n\n  if (searchQueryPagination === '') {\n    renderPopularMovies();\n  } else {\n    searchMoviesPagination(e);\n  }\n\n  // СЧЕТЧИК ПАГИНАЦИИ\n  renderMarkupOnClickLink(e);\n  ellipsis();\n  curentPage();\n  disaibledBtn();\n}\n\n// ////////////////////// НАВИГАЦИЯ ПО КНОПКЕ\n\nfunction onClickButtonPagination(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const ref = {\n    leftBtn: document.querySelector('.btn-left'),\n    rightBtn: document.querySelector('.btn-right'),\n  };\n\n  if (e.target === ref.rightBtn) {\n    PAGE += 1;\n  }\n\n  if (e.target === ref.leftBtn) {\n    PAGE -= 1;\n  }\n\n  refs.mainContainer.innerHTML = '';\n\n  if (searchQueryPagination === '') {\n    renderPopularMovies();\n  } else {\n    searchMoviesPagination(e);\n  }\n\n  // СЧЕТЧИК ПАГИНАЦИИ\n  renderPaginationONClickBtn(e);\n  ellipsis();\n  curentPage();\n  disaibledBtn();\n}\n","import { APIURL } from './index';\nimport localStrg from '../localStorage/localStrg';\nimport { PAGE } from '../pagination-js/main-pagination';\n\nexport async function fetchPopular(token) {\n  return await (\n    await fetch(APIURL + `3/trending/movie/day?api_key=${token}&page=${PAGE}`)\n  ).json();\n}\n\nexport async function fetchGenresList(token) {\n  const response = await (\n    await fetch(APIURL + `3/genre/movie/list?api_key=${token}&language=en-US`)\n  ).json();\n  localStrg.save('genresList', response.genres);\n  console.log('Genres were updated, and saved to localStorage for future');\n  return response.genres;\n}\n\n// ФУНКЦИЯ ЗАПРОСА ПУТЬ ЗАПРОСА\nexport async function fetchSearch(token, name) {\n  const response = await (\n    await fetch(\n      APIURL + `3/search/movie?api_key=${token}&language=en-US&query=${name}`\n    )\n  ).json();\n  return response;\n}\n","import { fetchGenresList } from \"../index-page/themoviedbAPI\";\nimport localStrg, { save, load, del } from \"../localStorage/localStrg\";\nimport { APIKEY } from \"../index-page/index\";\n\nexport async function decodeGenres(genres){\n    if (!localStrg.load (\"genresList\")){\n        await fetchGenresList(APIKEY)\n    }\n    let genresList = localStrg.load (\"genresList\");\n    let genresNames = new Array;\n    \n    genres.forEach(async genre =>  {\n    // try to find genre in localStorage\n    try{\n        genresNames.push((genresList.find(genreListItem => genreListItem.id === genre)).name)\n    }// update localStorage ganres data and try to find one more time\n    catch(error){\n        console.log(`${genre} wasn't found in Local Storage, updating ganresList`)\n        genresList = await fetchGenresList(APIKEY);\n        genresNames.push((genresList.find(genreListItem => genreListItem.id === genre)).name)\n    }\n});\n\n    return(genresNames.join(\", \"))\n}\n","import { decodeGenres } from './decodeGenres';\nimport localStrg from '../localStorage/localStrg';\n\nexport async function processCurrentPage (result){\n    const currentPageContent = await Promise.all(\n      result.map(\n        async ({\n          id,\n          title,\n          original_title,\n          name,\n          original_name,\n          overview,\n          poster_path,\n          genre_ids,\n          popularity,\n          release_date,\n          first_air_date,\n          vote_average,\n          vote_count,\n        }) => {\n          const movieTitle = title ? title : name;\n          const movieOriginalTitle = original_title\n            ? original_title\n            : original_name;\n          const movieDate = release_date ? release_date : first_air_date;\n          const imgPath = poster_path\n            ? `https://image.tmdb.org/t/p/w300` + poster_path\n            : '';\n          const genres = genre_ids.length > 1 ? await decodeGenres(genre_ids) : false;\n          const raitng = vote_average ? vote_average.toFixed(1) : 0;\n\n          return await {\n            id: id,\n            title: movieTitle,\n            originalTitle: movieOriginalTitle,\n            year: movieDate ? movieDate.slice(0, 4) : undefined,\n            genres: genres,\n            popularity: popularity,\n            overview: overview,\n            rating: raitng,\n            voteCount: vote_count,\n            imgPath: imgPath,\n          };\n        }\n      )\n    );\n    localStrg.save('currentPage', currentPageContent);\n  \n    return currentPageContent;\n  }","import { processCurrentPage } from '../data-processing/processCurrentPage';\nimport { openModalFooter } from '../common/modal-footer';\nimport { getPopularMovies } from '../index-page/search';\nimport { openModal } from '../common/modal';\nimport { startPage } from '../pagination-js/counter-pagination';\nimport { renderItems } from '../common/renderItems';\nimport { searchMovies } from './search';\nimport goTopBtn from '../common/goTopBtn';\nimport Spinner from '../common/spinner';\n\nconst spin = new Spinner();\n\nexport const APIKEY = '565e4989d784811de7dff7d665000157';\nexport const APIURL = 'https://api.themoviedb.org/';\nexport const refs = {\n  mainContainer: document.querySelector('.filmoteka__container'),\n  openModalBtn: document.querySelector('.modal-footer-open'),\n  searchResultText: document.querySelector('.form-text'),\n  form: document.querySelector('.header_search'),\n};\n\nrefs.mainContainer.addEventListener('click', openModal);\nrefs.openModalBtn.addEventListener('click', openModalFooter);\nrefs.form.addEventListener('submit', searchMovies);\n\nspin.spinOn();\nrenderPopularMovies();\nsetTimeout(startPage, 500);\n\nexport async function renderPopularMovies() {\n  const popularMovies = await getPopularMovies(APIKEY);\n  const currentPageContent = await processCurrentPage(popularMovies);\n\n  renderItems(currentPageContent);\n  spin.spinOff();\n\ngoTopBtn();\n}\n"],"names":["$8e29cf4802d0d4b8$export$c1f1fc7a5593d7f1","currentPageContent","mainContainer","document","querySelector","itemMarkup","map","id","title","year","genres","rating","imgPath","countOfComma","match","length","slice","lastIndexOf","itemString","innerHTML","insertAdjacentHTML","join","$4979be684e158b87$var$spin","default","$4979be684e158b87$export$7804ac8eb5cfa918","$4979be684e158b87$export$8ffd701332f06295","$4979be684e158b87$var$searchQuery","async","$4979be684e158b87$export$76bd8a7b840a3729","APIKEY1","popularMovies","$c4db51420262bac1$export$16bf2264c00353d2","total_pages","results","$e9e1ba73732ed350$export$c90e0de26581eb18","peg2","peg3","peg4","peg5","peg6","$e9e1ba73732ed350$export$f4bad34c44b28e79","$57e6bfcf14d26f27$var$div","$57e6bfcf14d26f27$export$d2dfced4bd191a20","e","firstPage","lastPage","pages","$6f8eac57d8ad4780$export$d3d35020fa5b54f0","$57e6bfcf14d26f27$var$lastPages","Number","textContent","$57e6bfcf14d26f27$var$incriment","$57e6bfcf14d26f27$var$dicremrnt","$57e6bfcf14d26f27$export$bfa07905d8d7dc88","$57e6bfcf14d26f27$export$7526032aa4edafb4","$23c4e1d8fda96721$export$bd0db9ad2612fd04","event","preventDefault","searchResult","token","fetch","$c1872c521253a89f$export$39576a9723c055a0","json","$23c4e1d8fda96721$var$fetchSearchPagination","$c1872c521253a89f$export$8aa241ee05ce92b7","$23c4e1d8fda96721$var$getSearchMoviesPagination","$588bc9c78565615f$export$8ea1b01e13f14e83","$a77a5c919eaaf562$export$a5b94313d6908893","refs","ellipsisStart","ellipsisEnd","classList","remove","add","$a77a5c919eaaf562$export$3fa06f381193c1d1","leftBtn","rightBtn","removeAttribute","setAttribute","$a77a5c919eaaf562$export$6c7df1e126ace2fd","activ","pagination","thirdPage","fourthPage","fifthPage","lastPag","preFirstPage","preLastPag","$6f8eac57d8ad4780$var$refs","$c4db51420262bac1$export$d60bdeaf43923027","response","$7GRT7","save","console","log","$c4db51420262bac1$export$6f539dc45dead1c","name","addEventListener","target","nodeName","$c1872c521253a89f$export$12335c527465096d","ref","$80aed46539d0ffa4$export$10c61d4a9a9ff219","load","genresList","genresNames","Array","forEach","genre","push","find","genreListItem","error","result","Promise","all","original_title","original_name","overview","poster_path","genre_ids","popularity","release_date","first_air_date","vote_average","vote_count","movieTitle","movieOriginalTitle","movieDate","raitng","toFixed","originalTitle","undefined","voteCount","$c1872c521253a89f$var$spin","$c1872c521253a89f$export$21666b427502ea6d","openModalBtn","searchResultText","form","spinOff","$jWOqs","$eTE0Z","openModal","$34clH","openModalFooter","spinOn","search","value","$4979be684e158b87$export$7bb36ad8ac4c04bb","setTimeout"],"version":3,"file":"index.a56710a7.js.map"}